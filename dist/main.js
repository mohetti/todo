(()=>{"use strict";var e,t,r={71:(e,t,r)=>{r.d(t,{h7:()=>f,Mr:()=>g,qJ:()=>m,Rh:()=>u,bX:()=>o,w4:()=>i,bY:()=>s,Yc:()=>l,_i:()=>d,F1:()=>a,i8:()=>c});var n=r(256);let o=document.querySelector("#task-title"),i=document.querySelector("#task-descr"),l=document.querySelector("#high"),a=document.querySelector("#medium"),d=document.querySelector("#low"),c=document.querySelector("#task-notes"),s=document.querySelector("#task-date"),u=function(){h.classList.remove("bg-active"),o.value="",i.value="",l.checked=!1,a.checked=!1,d.checked=!1,c.value="",s.value=""},h=document.querySelector(".modal-bg"),f=function(){-1!==n.folderArray.findIndex((e=>!0===e.highlight))&&h.classList.add("bg-active")},g=function(){u()},m=function(){let e=n.folderArray[n.folderArray.findIndex((e=>!0===e.highlight))];return-1!==e.tasks.findIndex((e=>e.title===o.value))?alert("You already have a task with this title."):""===o.value?alert("Please enter a title"):!1===l.checked&&!1===a.checked&&!1===d.checked?alert("Please choose a priority"):void r.e(152).then(r.bind(r,152)).then((t=>{t.appendTaskToFolder(e)}))}},256:(e,t,r)=>{r.r(t),r.d(t,{pushToFolderArray:()=>i,folderArray:()=>o,highlightTrue:()=>l,delListItem:()=>a});var n=r(158);let o=[],i=function(e){return o.push(function(e){let t={};return t.folder=e.value,t.highlight=!1,t.tasks=[],t}(e)),(0,n.q)(),o},l=function(e){return o.map((t=>t.folder===e?t.highlight=!0:t.highlight=!1)),(0,n.q)(),o},a=function(){let e=o.findIndex((e=>!0===e.highlight));return o.splice(e,1),(0,n.q)(),o}},158:(e,t,r)=>{r.d(t,{q:()=>o,$:()=>i});var n=r(256);let o=function(){window.localStorage.clear(),localStorage.setItem("containerArray",JSON.stringify(n.folderArray))},i=function(){let e=localStorage.getItem("containerArray"),t=JSON.parse(e);!function(e){let t=document.getElementById("folder-ul");for(let r=0;r<e.length;r++){let n=document.createElement("li");t.appendChild(n),n.innerText=e[r].folder,n.classList.add("folders")}}(t),function(e){for(let t=0;t<e.length;t++)n.folderArray.push(e[t])}(t)}}},n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={exports:{}};return r[e](t,t.exports,o),t.exports}o.m=r,o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,r)=>(o.f[r](e,t),t)),[])),o.u=e=>e+".main.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="todo:",o.l=(r,n,i,l)=>{if(e[r])e[r].push(n);else{var a,d;if(void 0!==i)for(var c=document.getElementsByTagName("script"),s=0;s<c.length;s++){var u=c[s];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+i){a=u;break}}a||(d=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",t+i),a.src=r),e[r]=[n];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var o=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),d&&document.head.appendChild(a)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={179:0};o.f.j=(t,r)=>{var n=o.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise(((r,o)=>{n=e[t]=[r,o]}));r.push(n[2]=i);var l=o.p+o.u(t),a=new Error;o.l(l,(r=>{if(o.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),l=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+l+")",a.name="ChunkLoadError",a.type=i,a.request=l,n[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{for(var n,i,[l,a,d]=r,c=0,s=[];c<l.length;c++)i=l[c],o.o(e,i)&&e[i]&&s.push(e[i][0]),e[i]=0;for(n in a)o.o(a,n)&&(o.m[n]=a[n]);for(d&&d(o),t&&t(r);s.length;)s.shift()()},r=self.webpackChunktodo=self.webpackChunktodo||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{var e=o(158),t=o(256);let r=document.getElementById("new-folder"),n=document.getElementById("folder-ul");var i=o(71);0!==window.localStorage.length&&(0,e.$)(),document.querySelector("#add-new-btn").addEventListener("click",(function(){let e=t.folderArray.findIndex((e=>e.folder===r.value));""!==r.value&&(-1!==e&&0!==t.folderArray.length||(Promise.resolve().then(o.bind(o,256)).then((e=>{e.pushToFolderArray(r)})),o.e(185).then(o.bind(o,185)).then((e=>{e.newFolder(n,r)}))))}));let l=document.querySelector("#folder-ul");l.addEventListener("click",(function(e){if("folder-ul"!==e.target.id){let t=e.target.innerText;Promise.resolve().then(o.bind(o,256)).then((e=>{e.highlightTrue(t)})),o.e(185).then(o.bind(o,185)).then((t=>{t.styleHighlightedFolder(e.target)})),o.e(520).then(o.bind(o,520)).then((e=>{e.displayTasks()}))}})),l.addEventListener("contextmenu",(function(e){e.preventDefault(),e.target.classList.contains("highlight")&&o.e(185).then(o.bind(o,185)).then((t=>{t.rightClickHandler(e)}))})),window.addEventListener("click",(function(e){"right-click-item"===e.target.classList[0]?(o.e(185).then(o.bind(o,185)).then((e=>{e.delFromList()})),Promise.resolve().then(o.bind(o,256)).then((e=>{e.delListItem()}))):document.getElementById("menu").classList.remove("active")})),document.querySelector(".open-modal").addEventListener("click",i.h7),document.querySelector(".modal-close").addEventListener("click",i.Mr),document.querySelector("#task-subm").addEventListener("click",i.qJ),document.querySelector("#body").addEventListener("click",(function(e){if("body"!==e.target.id)if(e.target.classList.contains("task-display")||e.target.parentElement.classList.contains("task-display")){let t;t=void 0===e.target.firstChild.innerText?e.target.parentElement.firstChild.innerText:e.target.firstChild.innerText,o.e(520).then(o.bind(o,520)).then((e=>{e.openTask(t)}))}else"note-delete"===e.target.id&&(o.e(152).then(o.bind(o,152)).then((t=>{t.deleteNote(e)})),o.e(520).then(o.bind(o,520)).then((t=>{t.deleteNoteFromDisplay(e)})))}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvL3dlYnBhY2svcnVudGltZS9sb2FkIHNjcmlwdCIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL2V2ZW50TGlzdGVuZXJzTW9kYWwuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9mb2xkZXJMb2dpYy5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL2xvY2FsU3RvcmFnZS5qcyIsIndlYnBhY2s6Ly90b2RvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RvZG8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvZG8vd2VicGFjay9ydW50aW1lL2Vuc3VyZSBjaHVuayIsIndlYnBhY2s6Ly90b2RvL3dlYnBhY2svcnVudGltZS9nZXQgamF2YXNjcmlwdCBjaHVuayBmaWxlbmFtZSIsIndlYnBhY2s6Ly90b2RvL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vdG9kby93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RvZG8vd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly90b2RvL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3RvZG8vd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9ldmVudExpc3RlbmVycy5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbImluUHJvZ3Jlc3MiLCJkYXRhV2VicGFja1ByZWZpeCIsInRhc2tUaXRsZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRhc2tEZXNjciIsInByaW9IaWdoIiwicHJpb01lZCIsInByaW9Mb3ciLCJ0YXNrTm90ZXMiLCJ0YXNrRGF0ZSIsInNldERlZmF1bHQiLCJtb2RhbEJnIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidmFsdWUiLCJjaGVja2VkIiwib3Blbk1vZGFsIiwiZm9sZGVyQXJyYXkiLCJ4IiwiaGlnaGxpZ2h0IiwiYWRkIiwiY2xvc2VNb2RhbCIsInN1Ym1pdFRhc2siLCJhcHBlbmRUbyIsInRhc2tzIiwiZmluZEluZGV4IiwidGl0bGUiLCJhbGVydCIsInRoZW4iLCJhcHBlbmQiLCJhcHBlbmRUYXNrVG9Gb2xkZXIiLCJwdXNoVG9Gb2xkZXJBcnJheSIsImZvbGRlck5hbWUiLCJwdXNoIiwibmV3T2JqIiwiY3JlYXRlRm9sZGVyT2JqIiwiaGlnaGxpZ2h0VHJ1ZSIsImlubmVyVGV4dCIsIm1hcCIsImZvbGRlciIsImRlbExpc3RJdGVtIiwiYXJyYXlJbmRleCIsInNwbGljZSIsInNldExvY2FsU3RvcmFnZSIsIndpbmRvdyIsImxvY2FsU3RvcmFnZSIsImNsZWFyIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJnZXRMb2NhbFN0b3JhZ2UiLCJzdG9yYWdlQXJyYXkiLCJnZXRJdGVtIiwiZ2V0QXJyYXkiLCJwYXJzZSIsImFycmF5IiwiZm9sZGVyRGlzcGxheSIsImdldEVsZW1lbnRCeUlkIiwiaSIsImxlbmd0aCIsImxpIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwicG9wdWxhdGVGb2xkZXIiLCJwb3B1bGF0ZUFycmF5IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJtIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiZiIsImUiLCJjaHVua0lkIiwiUHJvbWlzZSIsImFsbCIsImtleXMiLCJyZWR1Y2UiLCJwcm9taXNlcyIsInUiLCJnIiwiZ2xvYmFsVGhpcyIsInRoaXMiLCJGdW5jdGlvbiIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJsIiwidXJsIiwiZG9uZSIsInNjcmlwdCIsIm5lZWRBdHRhY2giLCJ1bmRlZmluZWQiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJzIiwiZ2V0QXR0cmlidXRlIiwiY2hhcnNldCIsInRpbWVvdXQiLCJuYyIsInNldEF0dHJpYnV0ZSIsInNyYyIsIm9uU2NyaXB0Q29tcGxldGUiLCJwcmV2IiwiZXZlbnQiLCJvbmVycm9yIiwib25sb2FkIiwiY2xlYXJUaW1lb3V0IiwiZG9uZUZucyIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImZvckVhY2giLCJmbiIsInNldFRpbWVvdXQiLCJiaW5kIiwidHlwZSIsInRhcmdldCIsImhlYWQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwibG9jYXRpb24iLCJjdXJyZW50U2NyaXB0IiwiRXJyb3IiLCJyZXBsYWNlIiwicCIsImluc3RhbGxlZENodW5rcyIsIjE3OSIsImoiLCJpbnN0YWxsZWRDaHVua0RhdGEiLCJwcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImVycm9yIiwiZXJyb3JUeXBlIiwicmVhbFNyYyIsIm1lc3NhZ2UiLCJuYW1lIiwicmVxdWVzdCIsIndlYnBhY2tKc29ucENhbGxiYWNrIiwicGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24iLCJkYXRhIiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsInJ1bnRpbWUiLCJyZXNvbHZlcyIsInNoaWZ0IiwiY2h1bmtMb2FkaW5nR2xvYmFsIiwic2VsZiIsImFkZEV2ZW50TGlzdGVuZXIiLCJkdXBsaWNhdGVzVHJ1ZSIsIm5ld0ZvbGRlciIsIm5ld0VudHJ5IiwiZm9sZGVyQWN0aW9ucyIsImlkIiwiaGlnaGxpZ2h0aW5nIiwiaGlnaGxpZ2h0Q1NTIiwic3R5bGVIaWdobGlnaHRlZEZvbGRlciIsImRpc3BsYXkiLCJkaXNwbGF5VGFza3MiLCJwcmV2ZW50RGVmYXVsdCIsImNvbnRhaW5zIiwicmlnaHRDbGljayIsInJpZ2h0Q2xpY2tIYW5kbGVyIiwiZGVsSXRlbSIsImRlbEZyb21MaXN0IiwicGFyZW50RWxlbWVudCIsInNlYXJjaFRlcm0iLCJmaXJzdENoaWxkIiwib3BlbiIsIm9wZW5UYXNrIiwiZGVsTm90ZSIsImRlbGV0ZU5vdGUiLCJkZWxldGVOb3RlRnJvbURpc3BsYXkiXSwibWFwcGluZ3MiOiJ1QkFBSUEsRUFDQUMsRSx5SUNBSixJQUFJQyxFQUFZQyxTQUFTQyxjQUFjLGVBQ25DQyxFQUFZRixTQUFTQyxjQUFjLGVBQ25DRSxFQUFXSCxTQUFTQyxjQUFjLFNBQ2xDRyxFQUFVSixTQUFTQyxjQUFjLFdBQ2pDSSxFQUFVTCxTQUFTQyxjQUFjLFFBQ2pDSyxFQUFZTixTQUFTQyxjQUFjLGVBQ25DTSxFQUFXUCxTQUFTQyxjQUFjLGNBR2xDTyxFQUFhLFdBQ2JDLEVBQVFDLFVBQVVDLE9BQU8sYUFDekJaLEVBQVVhLE1BQVEsR0FDbEJWLEVBQVVVLE1BQVEsR0FDbEJULEVBQVNVLFNBQVUsRUFDbkJULEVBQVFTLFNBQVUsRUFDbEJSLEVBQVFRLFNBQVUsRUFDbEJQLEVBQVVNLE1BQVEsR0FDbEJMLEVBQVNLLE1BQVEsSUFJakJILEVBQVVULFNBQVNDLGNBQWMsYUFDakNhLEVBQVksWUFDOEMsSUFBdEQsRUFBQUMsWUFBQSxXQUFzQkMsSUFBcUIsSUFBaEJBLEVBQUVDLGFBQzdCUixFQUFRQyxVQUFVUSxJQUFJLGNBSzFCQyxFQUFhLFdBQ2JYLEtBSUFZLEVBQWEsV0FDYixJQUFJQyxFQUFZLEVBQUFOLFlBQVksRUFBQUEsWUFBQSxXQUFzQkMsSUFBcUIsSUFBaEJBLEVBQUVDLGFBRXpELE9BQXdCLElBREhJLEVBQVNDLE1BQU1DLFdBQVVQLEdBQUtBLEVBQUVRLFFBQVV6QixFQUFVYSxRQUU5RGEsTUFBTSw0Q0FFTyxLQUFwQjFCLEVBQVVhLE1BQ0hhLE1BQU0seUJBQ2UsSUFBckJ0QixFQUFTVSxVQUF5QyxJQUFwQlQsRUFBUVMsVUFBeUMsSUFBcEJSLEVBQVFRLFFBQ25FWSxNQUFN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YUFLbENYLFNBQVNDLGNBQWMsZUFFN0IrSixpQkFBaUIsUUFBUyxNQUduQmhLLFNBQVNDLGNBQWMsZ0JBQzdCK0osaUJBQWlCLFFBQVMsTUFFdEJoSyxTQUFTQyxjQUFjLGNBQzdCK0osaUJBQWlCLFFBQVMsTUFJcEJoSyxTQUFTQyxjQUFjLFNBQzdCK0osaUJBQWlCLFNEZVgsU0FBc0IvQyxHQUNwQyxHQUF3QixTQUFwQkEsRUFBTVksT0FBT3dDLEdBRVYsR0FBSXBELEVBQU1ZLE9BQU9uSCxVQUFVa0ssU0FBUyxpQkFDekMzRCxFQUFNWSxPQUFPb0QsY0FBY3ZLLFVBQVVrSyxTQUFTLGdCQUFpQixDQUM3RCxJQUFJTSxFQUM4Q0EsT0FBWjdFLElBQXRDWSxFQUFNWSxPQUFPc0QsV0FBV2hKLFVBQXVDOEUsRUFBTVksT0FBT29ELGNBQWNFLFdBQVdoSixVQUN0QzhFLEVBQU1ZLE9BQU9zRCxXQUFXaEosVUFFdkYsNkJBQXdCVCxNQUFLMEosSUFDekJBLEVBQUtDLFNBQVNILFVBRVMsZ0JBQXBCakUsRUFBTVksT0FBT3dDLEtBRXBCLDZCQUFxQjNJLE1BQUs0SixJQUN0QkEsRUFBUUMsV0FBV3RFLE1BR3ZCLDZCQUF3QnZGLE1BQUs0SixJQUN6QkEsRUFBUUUsc0JBQXNCdkUsVyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGluUHJvZ3Jlc3MgPSB7fTtcbnZhciBkYXRhV2VicGFja1ByZWZpeCA9IFwidG9kbzpcIjtcbi8vIGxvYWRTY3JpcHQgZnVuY3Rpb24gdG8gbG9hZCBhIHNjcmlwdCB2aWEgc2NyaXB0IHRhZ1xuX193ZWJwYWNrX3JlcXVpcmVfXy5sID0gKHVybCwgZG9uZSwga2V5LCBjaHVua0lkKSA9PiB7XG5cdGlmKGluUHJvZ3Jlc3NbdXJsXSkgeyBpblByb2dyZXNzW3VybF0ucHVzaChkb25lKTsgcmV0dXJuOyB9XG5cdHZhciBzY3JpcHQsIG5lZWRBdHRhY2g7XG5cdGlmKGtleSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc2NyaXB0cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIHMgPSBzY3JpcHRzW2ldO1xuXHRcdFx0aWYocy5nZXRBdHRyaWJ1dGUoXCJzcmNcIikgPT0gdXJsIHx8IHMuZ2V0QXR0cmlidXRlKFwiZGF0YS13ZWJwYWNrXCIpID09IGRhdGFXZWJwYWNrUHJlZml4ICsga2V5KSB7IHNjcmlwdCA9IHM7IGJyZWFrOyB9XG5cdFx0fVxuXHR9XG5cdGlmKCFzY3JpcHQpIHtcblx0XHRuZWVkQXR0YWNoID0gdHJ1ZTtcblx0XHRzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblxuXHRcdHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04Jztcblx0XHRzY3JpcHQudGltZW91dCA9IDEyMDtcblx0XHRpZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5uYykge1xuXHRcdFx0c2NyaXB0LnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIF9fd2VicGFja19yZXF1aXJlX18ubmMpO1xuXHRcdH1cblx0XHRzY3JpcHQuc2V0QXR0cmlidXRlKFwiZGF0YS13ZWJwYWNrXCIsIGRhdGFXZWJwYWNrUHJlZml4ICsga2V5KTtcblx0XHRzY3JpcHQuc3JjID0gdXJsO1xuXHR9XG5cdGluUHJvZ3Jlc3NbdXJsXSA9IFtkb25lXTtcblx0dmFyIG9uU2NyaXB0Q29tcGxldGUgPSAocHJldiwgZXZlbnQpID0+IHtcblx0XHQvLyBhdm9pZCBtZW0gbGVha3MgaW4gSUUuXG5cdFx0c2NyaXB0Lm9uZXJyb3IgPSBzY3JpcHQub25sb2FkID0gbnVsbDtcblx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdFx0dmFyIGRvbmVGbnMgPSBpblByb2dyZXNzW3VybF07XG5cdFx0ZGVsZXRlIGluUHJvZ3Jlc3NbdXJsXTtcblx0XHRzY3JpcHQucGFyZW50Tm9kZSAmJiBzY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXHRcdGRvbmVGbnMgJiYgZG9uZUZucy5mb3JFYWNoKChmbikgPT4gZm4oZXZlbnQpKTtcblx0XHRpZihwcmV2KSByZXR1cm4gcHJldihldmVudCk7XG5cdH1cblx0O1xuXHR2YXIgdGltZW91dCA9IHNldFRpbWVvdXQob25TY3JpcHRDb21wbGV0ZS5iaW5kKG51bGwsIHVuZGVmaW5lZCwgeyB0eXBlOiAndGltZW91dCcsIHRhcmdldDogc2NyaXB0IH0pLCAxMjAwMDApO1xuXHRzY3JpcHQub25lcnJvciA9IG9uU2NyaXB0Q29tcGxldGUuYmluZChudWxsLCBzY3JpcHQub25lcnJvcik7XG5cdHNjcmlwdC5vbmxvYWQgPSBvblNjcmlwdENvbXBsZXRlLmJpbmQobnVsbCwgc2NyaXB0Lm9ubG9hZCk7XG5cdG5lZWRBdHRhY2ggJiYgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xufTsiLCJpbXBvcnQge2ZvbGRlckFycmF5fSBmcm9tIFwiLi9mb2xkZXJMb2dpYy5qc1wiO1xubGV0IHRhc2tUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFzay10aXRsZVwiKTtcbmxldCB0YXNrRGVzY3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2stZGVzY3JcIik7XG5sZXQgcHJpb0hpZ2ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2hpZ2hcIik7XG5sZXQgcHJpb01lZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWVkaXVtXCIpO1xubGV0IHByaW9Mb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2xvd1wiKTtcbmxldCB0YXNrTm90ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2stbm90ZXNcIik7XG5sZXQgdGFza0RhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2stZGF0ZVwiKTtcblxuXG5sZXQgc2V0RGVmYXVsdCA9IChmdW5jdGlvbiBzZXREZWZhdWx0KCkge1xuICAgIG1vZGFsQmcuY2xhc3NMaXN0LnJlbW92ZShcImJnLWFjdGl2ZVwiKTtcbiAgICB0YXNrVGl0bGUudmFsdWUgPSBcIlwiO1xuICAgIHRhc2tEZXNjci52YWx1ZSA9IFwiXCI7XG4gICAgcHJpb0hpZ2guY2hlY2tlZCA9IGZhbHNlO1xuICAgIHByaW9NZWQuY2hlY2tlZCA9IGZhbHNlO1xuICAgIHByaW9Mb3cuY2hlY2tlZCA9IGZhbHNlO1xuICAgIHRhc2tOb3Rlcy52YWx1ZSA9IFwiXCI7XG4gICAgdGFza0RhdGUudmFsdWUgPSBcIlwiO1xufSk7XG5cbi8vIG9wZW5zIG1vZGFsIHRvIGNyZWF0ZSBuZXcgdGFza1xubGV0IG1vZGFsQmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWJnXCIpO1xubGV0IG9wZW5Nb2RhbCA9IChmdW5jdGlvbiBvcGVuTW9kYWwoKSB7XG4gICAgaWYgKGZvbGRlckFycmF5LmZpbmRJbmRleCh4ID0+IHguaGlnaGxpZ2h0ID09PSB0cnVlKSAhPT0gLTEpIHtcbiAgICAgICAgbW9kYWxCZy5jbGFzc0xpc3QuYWRkKFwiYmctYWN0aXZlXCIpO1xuICAgIH07XG59KTtcblxuLy8gY2xvc2VzIG1vZGFsXG5sZXQgY2xvc2VNb2RhbCA9IChmdW5jdGlvbiBjbG9zZU1vZGFsKCkge1xuICAgIHNldERlZmF1bHQoKTtcbn0pO1xuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4vLyBzdWJtaXRzIG5ldyB0YXNrXG5sZXQgc3VibWl0VGFzayA9IChmdW5jdGlvbiBzdWJtaXRUYXNrKCkge1xuICAgIGxldCBhcHBlbmRUbyAgPSBmb2xkZXJBcnJheVtmb2xkZXJBcnJheS5maW5kSW5kZXgoeCA9PiB4LmhpZ2hsaWdodCA9PT0gdHJ1ZSldO1xuICAgIGxldCBkdXBsaWNhdGVUYXNrcyA9IGFwcGVuZFRvLnRhc2tzLmZpbmRJbmRleCh4ID0+IHgudGl0bGUgPT09IHRhc2tUaXRsZS52YWx1ZSk7XG4gICAgaWYgKGR1cGxpY2F0ZVRhc2tzICE9PSAtMSkge1xuICAgICAgICByZXR1cm4gYWxlcnQoXCJZb3UgYWxyZWFkeSBoYXZlIGEgdGFzayB3aXRoIHRoaXMgdGl0bGUuXCIpO1xuICAgIH1cbiAgICBpZiAodGFza1RpdGxlLnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgIHJldHVybiBhbGVydChcIlBsZWFzZSBlbnRlciBhIHRpdGxlXCIpO1xuICAgIH0gZWxzZSBpZiAocHJpb0hpZ2guY2hlY2tlZCA9PT0gZmFsc2UgJiYgcHJpb01lZC5jaGVja2VkID09PSBmYWxzZSAmJiBwcmlvTG93LmNoZWNrZWQgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBhbGVydChcIlBsZWFzZSBjaG9vc2UgYSBwcmlvcml0eVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpbXBvcnQoXCIuL3Rhc2tzLmpzXCIpLnRoZW4oYXBwZW5kID0+IHtcbiAgICAgICAgICAgIGFwcGVuZC5hcHBlbmRUYXNrVG9Gb2xkZXIoYXBwZW5kVG8pO1xuICAgICAgICB9KTtcbiAgICB9O1xufSk7XG5cbmV4cG9ydCB7b3Blbk1vZGFsLCBjbG9zZU1vZGFsLCBzdWJtaXRUYXNrLCBzZXREZWZhdWx0LCB0YXNrVGl0bGUsIHRhc2tEZXNjciwgdGFza0RhdGUsIHByaW9IaWdoLCBwcmlvTG93LCBwcmlvTWVkLCB0YXNrTm90ZXN9IiwibGV0IGZvbGRlckFycmF5ID0gW107XG5pbXBvcnQge3NldExvY2FsU3RvcmFnZX0gZnJvbSBcIi4vbG9jYWxTdG9yYWdlLmpzXCI7XG5sZXQgY3JlYXRlRm9sZGVyT2JqID0gZnVuY3Rpb24gY3JlYXRlRm9sZGVyT2JqKGZvbGRlck5hbWUpIHtcbiAgICBsZXQgbmV3T2JqID0ge307XG4gICAgbmV3T2JqW1wiZm9sZGVyXCJdID0gZm9sZGVyTmFtZS52YWx1ZTtcbiAgICBuZXdPYmpbXCJoaWdobGlnaHRcIl0gPSBmYWxzZTtcbiAgICBuZXdPYmpbXCJ0YXNrc1wiXSA9IFtdO1xuICAgIHJldHVybiAobmV3T2JqKTtcbn1cblxubGV0IHB1c2hUb0ZvbGRlckFycmF5ID0gZnVuY3Rpb24gcHVzaFRvRm9sZGVyQXJyYXkoZm9sZGVyTmFtZSkge1xuICAgIGZvbGRlckFycmF5LnB1c2goY3JlYXRlRm9sZGVyT2JqKGZvbGRlck5hbWUpKTtcbiAgICBzZXRMb2NhbFN0b3JhZ2UoKTtcbiAgICByZXR1cm4gZm9sZGVyQXJyYXk7ICBcbn1cbmxldCBoaWdobGlnaHRUcnVlID0gZnVuY3Rpb24gaGlnaGxpZ2h0VHJ1ZShpbm5lclRleHQpIHtcbiAgICBmb2xkZXJBcnJheS5tYXAoKHgpID0+ICh4LmZvbGRlciA9PT0gaW5uZXJUZXh0ID8geC5oaWdobGlnaHQgPSB0cnVlIDogeC5oaWdobGlnaHQgPSBmYWxzZSkpO1xuICAgIHNldExvY2FsU3RvcmFnZSgpO1xuICAgIHJldHVybiBmb2xkZXJBcnJheTtcbn07XG5sZXQgZGVsTGlzdEl0ZW0gPSAoZnVuY3Rpb24gZGVsTGlzdEl0ZW0oKSB7XG4gICAgbGV0IGFycmF5SW5kZXggPSBmb2xkZXJBcnJheS5maW5kSW5kZXgoeCA9PiB4LmhpZ2hsaWdodCA9PT0gdHJ1ZSk7XG4gICAgZm9sZGVyQXJyYXkuc3BsaWNlKGFycmF5SW5kZXgsIDEpO1xuICAgIHNldExvY2FsU3RvcmFnZSgpO1xuICAgIHJldHVybiBmb2xkZXJBcnJheTtcbn0pO1xuXG5leHBvcnQge3B1c2hUb0ZvbGRlckFycmF5LCBmb2xkZXJBcnJheSwgaGlnaGxpZ2h0VHJ1ZSwgZGVsTGlzdEl0ZW19OyIsImltcG9ydCB7Zm9sZGVyQXJyYXl9IGZyb20gXCIuL2ZvbGRlckxvZ2ljLmpzXCI7XG5sZXQgc2V0TG9jYWxTdG9yYWdlID0gKGZ1bmN0aW9uIHNldExvY2FsU3RvcmFnZSgpIHtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjb250YWluZXJBcnJheVwiLCBKU09OLnN0cmluZ2lmeShmb2xkZXJBcnJheSkpO1xufSk7XG5cbmxldCBwb3B1bGF0ZUZvbGRlciA9IChmdW5jdGlvbiBwb3B1bGF0ZUZvbGRlcihhcnJheSkge1xuICAgIGxldCBmb2xkZXJEaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb2xkZXItdWxcIik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgICAgIGZvbGRlckRpc3BsYXkuYXBwZW5kQ2hpbGQobGkpO1xuICAgICAgICBsaS5pbm5lclRleHQgPSBhcnJheVtpXS5mb2xkZXI7XG4gICAgICAgIGxpLmNsYXNzTGlzdC5hZGQoXCJmb2xkZXJzXCIpO1xuICAgIH07XG59KTtcblxubGV0IHBvcHVsYXRlQXJyYXkgPSAoZnVuY3Rpb24gcG9wdWxhdGVBcnJheShhcnJheSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZm9sZGVyQXJyYXkucHVzaChhcnJheVtpXSk7XG4gICAgfTtcbn0pO1xuXG5sZXQgZ2V0TG9jYWxTdG9yYWdlID0gKGZ1bmN0aW9uIGdldExvY2FsU3RvcmFnZSgpIHtcbiAgICBsZXQgc3RvcmFnZUFycmF5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjb250YWluZXJBcnJheVwiKTtcbiAgICBsZXQgZ2V0QXJyYXkgPSBKU09OLnBhcnNlKHN0b3JhZ2VBcnJheSk7XG4gICAgcG9wdWxhdGVGb2xkZXIoZ2V0QXJyYXkpO1xuICAgIHBvcHVsYXRlQXJyYXkoZ2V0QXJyYXkpO1xufSk7XG5cbmV4cG9ydCB7c2V0TG9jYWxTdG9yYWdlLCBnZXRMb2NhbFN0b3JhZ2V9OyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZiA9IHt9O1xuLy8gVGhpcyBmaWxlIGNvbnRhaW5zIG9ubHkgdGhlIGVudHJ5IGNodW5rLlxuLy8gVGhlIGNodW5rIGxvYWRpbmcgZnVuY3Rpb24gZm9yIGFkZGl0aW9uYWwgY2h1bmtzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmUgPSAoY2h1bmtJZCkgPT4ge1xuXHRyZXR1cm4gUHJvbWlzZS5hbGwoT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5mKS5yZWR1Y2UoKHByb21pc2VzLCBrZXkpID0+IHtcblx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmZba2V5XShjaHVua0lkLCBwcm9taXNlcyk7XG5cdFx0cmV0dXJuIHByb21pc2VzO1xuXHR9LCBbXSkpO1xufTsiLCIvLyBUaGlzIGZ1bmN0aW9uIGFsbG93IHRvIHJlZmVyZW5jZSBhc3luYyBjaHVua3Ncbl9fd2VicGFja19yZXF1aXJlX18udSA9IChjaHVua0lkKSA9PiB7XG5cdC8vIHJldHVybiB1cmwgZm9yIGZpbGVuYW1lcyBiYXNlZCBvbiB0ZW1wbGF0ZVxuXHRyZXR1cm4gXCJcIiArIGNodW5rSWQgKyBcIi5tYWluLmpzXCI7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJ2YXIgc2NyaXB0VXJsO1xuaWYgKF9fd2VicGFja19yZXF1aXJlX18uZy5pbXBvcnRTY3JpcHRzKSBzY3JpcHRVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcubG9jYXRpb24gKyBcIlwiO1xudmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmRvY3VtZW50O1xuaWYgKCFzY3JpcHRVcmwgJiYgZG9jdW1lbnQpIHtcblx0aWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmNcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSBzY3JpcHRVcmwgPSBzY3JpcHRzW3NjcmlwdHMubGVuZ3RoIC0gMV0uc3JjXG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsIi8vIG5vIGJhc2VVUklcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gUHJvbWlzZSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDE3OTogMFxufTtcblxuXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmYuaiA9IChjaHVua0lkLCBwcm9taXNlcykgPT4ge1xuXHRcdC8vIEpTT05QIGNodW5rIGxvYWRpbmcgZm9yIGphdmFzY3JpcHRcblx0XHR2YXIgaW5zdGFsbGVkQ2h1bmtEYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgPyBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gOiB1bmRlZmluZWQ7XG5cdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhICE9PSAwKSB7IC8vIDAgbWVhbnMgXCJhbHJlYWR5IGluc3RhbGxlZFwiLlxuXG5cdFx0XHQvLyBhIFByb21pc2UgbWVhbnMgXCJjdXJyZW50bHkgbG9hZGluZ1wiLlxuXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhKSB7XG5cdFx0XHRcdHByb21pc2VzLnB1c2goaW5zdGFsbGVkQ2h1bmtEYXRhWzJdKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmKHRydWUpIHsgLy8gYWxsIGNodW5rcyBoYXZlIEpTXG5cdFx0XHRcdFx0Ly8gc2V0dXAgUHJvbWlzZSBpbiBjaHVuayBjYWNoZVxuXHRcdFx0XHRcdHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRcdFx0aW5zdGFsbGVkQ2h1bmtEYXRhID0gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gW3Jlc29sdmUsIHJlamVjdF07XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cHJvbWlzZXMucHVzaChpbnN0YWxsZWRDaHVua0RhdGFbMl0gPSBwcm9taXNlKTtcblxuXHRcdFx0XHRcdC8vIHN0YXJ0IGNodW5rIGxvYWRpbmdcblx0XHRcdFx0XHR2YXIgdXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgX193ZWJwYWNrX3JlcXVpcmVfXy51KGNodW5rSWQpO1xuXHRcdFx0XHRcdC8vIGNyZWF0ZSBlcnJvciBiZWZvcmUgc3RhY2sgdW53b3VuZCB0byBnZXQgdXNlZnVsIHN0YWNrdHJhY2UgbGF0ZXJcblx0XHRcdFx0XHR2YXIgZXJyb3IgPSBuZXcgRXJyb3IoKTtcblx0XHRcdFx0XHR2YXIgbG9hZGluZ0VuZGVkID0gKGV2ZW50KSA9PiB7XG5cdFx0XHRcdFx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSkge1xuXHRcdFx0XHRcdFx0XHRpbnN0YWxsZWRDaHVua0RhdGEgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF07XG5cdFx0XHRcdFx0XHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSAhPT0gMCkgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgZXJyb3JUeXBlID0gZXZlbnQgJiYgKGV2ZW50LnR5cGUgPT09ICdsb2FkJyA/ICdtaXNzaW5nJyA6IGV2ZW50LnR5cGUpO1xuXHRcdFx0XHRcdFx0XHRcdHZhciByZWFsU3JjID0gZXZlbnQgJiYgZXZlbnQudGFyZ2V0ICYmIGV2ZW50LnRhcmdldC5zcmM7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IubWVzc2FnZSA9ICdMb2FkaW5nIGNodW5rICcgKyBjaHVua0lkICsgJyBmYWlsZWQuXFxuKCcgKyBlcnJvclR5cGUgKyAnOiAnICsgcmVhbFNyYyArICcpJztcblx0XHRcdFx0XHRcdFx0XHRlcnJvci5uYW1lID0gJ0NodW5rTG9hZEVycm9yJztcblx0XHRcdFx0XHRcdFx0XHRlcnJvci50eXBlID0gZXJyb3JUeXBlO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLnJlcXVlc3QgPSByZWFsU3JjO1xuXHRcdFx0XHRcdFx0XHRcdGluc3RhbGxlZENodW5rRGF0YVsxXShlcnJvcik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubCh1cmwsIGxvYWRpbmdFbmRlZCwgXCJjaHVuay1cIiArIGNodW5rSWQsIGNodW5rSWQpO1xuXHRcdFx0XHR9IGVsc2UgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcblx0XHRcdH1cblx0XHR9XG59O1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG4vLyBubyBkZWZlcnJlZCBzdGFydHVwXG5cbi8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xudmFyIHdlYnBhY2tKc29ucENhbGxiYWNrID0gKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uLCBkYXRhKSA9PiB7XG5cdHZhciBbY2h1bmtJZHMsIG1vcmVNb2R1bGVzLCBydW50aW1lXSA9IGRhdGE7XG5cdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuXHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcblx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMCwgcmVzb2x2ZXMgPSBbXTtcblx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcblx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiYgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG5cdFx0XHRyZXNvbHZlcy5wdXNoKGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSk7XG5cdFx0fVxuXHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG5cdH1cblx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcblx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG5cdFx0fVxuXHR9XG5cdGlmKHJ1bnRpbWUpIHJ1bnRpbWUoX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cdGlmKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKSBwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbihkYXRhKTtcblx0d2hpbGUocmVzb2x2ZXMubGVuZ3RoKSB7XG5cdFx0cmVzb2x2ZXMuc2hpZnQoKSgpO1xuXHR9XG5cbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmt0b2RvXCJdID0gc2VsZltcIndlYnBhY2tDaHVua3RvZG9cIl0gfHwgW107XG5jaHVua0xvYWRpbmdHbG9iYWwuZm9yRWFjaCh3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIDApKTtcbmNodW5rTG9hZGluZ0dsb2JhbC5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCBjaHVua0xvYWRpbmdHbG9iYWwucHVzaC5iaW5kKGNodW5rTG9hZGluZ0dsb2JhbCkpO1xuXG4vLyBubyBkZWZlcnJlZCBzdGFydHVwIiwiLy8gY29uY2VybnMgZm9sZGVyTG9naWMuanMgYW5kIGRvbUZvbGRlci5qc1xubGV0IGZvbGRlck5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ldy1mb2xkZXJcIik7XG5sZXQgZm9sZGVyRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9sZGVyLXVsXCIpO1xuaW1wb3J0IHtmb2xkZXJBcnJheX0gZnJvbSBcIi4vZm9sZGVyTG9naWMuanNcIjtcblxubGV0IGhhbmRsZU5ld0ZvbGRlciA9IChmdW5jdGlvbiBoYW5kbGVOZXdGb2xkZXIoKSB7XG4gICAgbGV0IGR1cGxpY2F0ZXNUcnVlID0gZm9sZGVyQXJyYXkuZmluZEluZGV4KHggPT4geC5mb2xkZXIgPT09IGZvbGRlck5hbWUudmFsdWUpO1xuICAgIGlmIChmb2xkZXJOYW1lLnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKGR1cGxpY2F0ZXNUcnVlID09PSAtMSB8fCBmb2xkZXJBcnJheS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gcG9wdWxhdGUgYXJyYXkgd2l0aCBvYmplY3RzIGZvciBlYWNoIG5ldyBmb2xkZXJcbiAgICAgICAgaW1wb3J0KFwiLi9mb2xkZXJMb2dpYy5qc1wiKS50aGVuKG5ld0ZvbGRlciA9PiB7XG4gICAgICAgICAgICBuZXdGb2xkZXIucHVzaFRvRm9sZGVyQXJyYXkoZm9sZGVyTmFtZSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBwb3B1bGF0ZSB0aGUgZGlzcGxheSB3aXRoIG9uZSA8bGk+IGZvciBlYWNoIG5ldyBmb2xkZXJcbiAgICAgICAgaW1wb3J0KFwiLi9kb21Gb2xkZXIuanNcIikudGhlbihuZXdFbnRyeSA9PiB7XG4gICAgICAgICAgICBuZXdFbnRyeS5uZXdGb2xkZXIoZm9sZGVyRGlzcGxheSwgZm9sZGVyTmFtZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG4vLyBoaWdobGlnaHRpbmcgb25lIGZvbGRlciAob2JqLmhpZ2hsaWdodCA9IHRydWUpIGFuZCBiYWNrZ3JvdW5kY29sb3IgPSBjb2xvclxubGV0IGhpZ2hsaWdodCA9IChmdW5jdGlvbiBoaWdobGlnaHQoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmlkID09PSBcImZvbGRlci11bFwiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgaW5uZXJUZXh0ID0gZXZlbnQudGFyZ2V0LmlubmVyVGV4dDtcbiAgICAgICAgICAgIGltcG9ydChcIi4vZm9sZGVyTG9naWMuanNcIikudGhlbihoaWdobGlnaHRpbmcgPT4ge1xuICAgICAgICAgICAgICAgIGhpZ2hsaWdodGluZy5oaWdobGlnaHRUcnVlKGlubmVyVGV4dCk7XG4gICAgICAgIH0pO1xuICAgICAgICAgICAgaW1wb3J0KFwiLi9kb21Gb2xkZXIuanNcIikudGhlbihoaWdobGlnaHRDU1MgPT4ge1xuICAgICAgICAgICAgICAgIGhpZ2hsaWdodENTUy5zdHlsZUhpZ2hsaWdodGVkRm9sZGVyKGV2ZW50LnRhcmdldCk7XG4gICAgICAgIH0pO1xuICAgICAgICBpbXBvcnQoXCIuL3Rhc2tzRE9NLmpzXCIpLnRoZW4oZGlzcGxheSA9PiB7XG4gICAgICAgICAgICBkaXNwbGF5LmRpc3BsYXlUYXNrcygpO1xuICAgICAgICB9KTtcbiAgICB9O1xufSk7XG5cbi8vIHBvcCB1cCByaWdodC1jbGljayBtZW51XG5sZXQgcmlnaHRDbGlja01lbnUgPSAoZnVuY3Rpb24gcmlnaHRDbGlja01lbnUoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiaGlnaGxpZ2h0XCIpKSB7XG4gICAgICAgIGltcG9ydChcIi4vZG9tRm9sZGVyLmpzXCIpLnRoZW4ocmlnaHRDbGljayA9PiB7XG4gICAgICAgICAgICByaWdodENsaWNrLnJpZ2h0Q2xpY2tIYW5kbGVyKGV2ZW50KSAgXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG59KTtcblxuLy8gZGVsZXRlIGEgRm9sZGVyXG5sZXQgZGVsZXRlRm9sZGVyID0gKGZ1bmN0aW9uIGRlbGV0ZUZvbGRlcihldmVudCkge1xuICAgIGltcG9ydChcIi4vZG9tRm9sZGVyLmpzXCIpLnRoZW4oZGVsSXRlbSA9PiB7XG4gICAgICAgIGRlbEl0ZW0uZGVsRnJvbUxpc3QoKSAgXG4gICAgfSk7XG4gICAgaW1wb3J0KFwiLi9mb2xkZXJMb2dpYy5qc1wiKS50aGVuKGRlbEl0ZW0gPT4ge1xuICAgICAgICBkZWxJdGVtLmRlbExpc3RJdGVtKCkgIFxuICAgIH0pO1xufSk7XG5cbmxldCBnZXRUYXNrTmFtZSA9IChmdW5jdGlvbiBnZXRUYXNrTmFtZShldmVudCkge1xuICAgIGlmIChldmVudC50YXJnZXQuaWQgPT09IFwiYm9keVwiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJ0YXNrLWRpc3BsYXlcIikgfHwgXG4gICAgICBldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJ0YXNrLWRpc3BsYXlcIikpIHtcbiAgICAgICAgbGV0IHNlYXJjaFRlcm07XG4gICAgICAgIGV2ZW50LnRhcmdldC5maXJzdENoaWxkLmlubmVyVGV4dCA9PT0gdW5kZWZpbmVkID8gc2VhcmNoVGVybSA9IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LmZpcnN0Q2hpbGQuaW5uZXJUZXh0IDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoVGVybSA9IGV2ZW50LnRhcmdldC5maXJzdENoaWxkLmlubmVyVGV4dDtcbiAgICAgICAgXG4gICAgICAgIGltcG9ydChcIi4vdGFza3NET00uanNcIikudGhlbihvcGVuID0+IHtcbiAgICAgICAgICAgIG9wZW4ub3BlblRhc2soc2VhcmNoVGVybSkgIFxuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC5pZCA9PT0gXCJub3RlLWRlbGV0ZVwiKSB7XG4gICAgICAgIC8vIGRlbGV0ZSBmcm9tIEFycmF5XG4gICAgICAgIGltcG9ydChcIi4vdGFza3MuanNcIikudGhlbihkZWxOb3RlID0+IHtcbiAgICAgICAgICAgIGRlbE5vdGUuZGVsZXRlTm90ZShldmVudCkgIFxuICAgICAgICB9KTtcbiAgICAgICAgLy9kZWxldGUgZnJvbSBkaXNwbGF5XG4gICAgICAgIGltcG9ydChcIi4vdGFza3NET00uanNcIikudGhlbihkZWxOb3RlID0+IHtcbiAgICAgICAgICAgIGRlbE5vdGUuZGVsZXRlTm90ZUZyb21EaXNwbGF5KGV2ZW50KSAgXG4gICAgICAgIH0pO1xuICAgIH07XG59KTtcblxuZXhwb3J0IHtoYW5kbGVOZXdGb2xkZXIsIGhpZ2hsaWdodCwgcmlnaHRDbGlja01lbnUsIGRlbGV0ZUZvbGRlciwgZ2V0VGFza05hbWV9OyIsIi8vIG5weCB3ZWJwYWNrIC0td2F0Y2hcbmltcG9ydCB7Z2V0TG9jYWxTdG9yYWdlLCBnZXRBcnJheX0gZnJvbSBcIi4vbG9jYWxTdG9yYWdlLmpzXCI7XG5pbXBvcnQge2ZvbGRlckFycmF5fSBmcm9tIFwiLi9mb2xkZXJMb2dpYy5qc1wiO1xuaWYgKHdpbmRvdy5sb2NhbFN0b3JhZ2UubGVuZ3RoICE9PSAwKSB7XG4gICAgZ2V0TG9jYWxTdG9yYWdlKCk7XG59XG4vLyAyIEV2ZW50TGlzdGVuZXJzOiBBZGQgYSBuZXcgZm9sZGVyIHRvIHRoZSBET00tbGlzdCBhcyA8bGk+IGFuZCB0byB0aGUgQ29udGFpbmVyLUFycmF5IGFzIG9iamVjdFxubGV0IGJ0bk5ld0ZvbGRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLW5ldy1idG5cIik7XG5pbXBvcnQge2hhbmRsZU5ld0ZvbGRlcn0gZnJvbSBcIi4vZXZlbnRMaXN0ZW5lcnMuanNcIlxuYnRuTmV3Rm9sZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVOZXdGb2xkZXIpO1xuXG5cblxuLy8gRXZlbnRMaXN0ZW5lciB0byBoaWdobGlnaHQgb25lIGZvbGRlciwgZGVsZXRlIGl0IG9yIHJlbmFtZSBpdFxubGV0IGZvbGRlckFjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ZvbGRlci11bFwiKTtcbmltcG9ydCB7aGlnaGxpZ2h0fSBmcm9tIFwiLi9ldmVudExpc3RlbmVycy5qc1wiO1xuZm9sZGVyQWN0aW9ucy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGlnaGxpZ2h0KTtcblxuXG4vL2V2ZW50bGlzdGVuZXIgZm9yIHJpZ2h0LWNsaWNrIGluc2lkZSBmb2xkZXItbGlzdC4gUG9wcyB1cCBhIGN1c3RvbSByaWdodC1jbGljayBtZW51XG5pbXBvcnQge3JpZ2h0Q2xpY2tNZW51LCBkZWxldGVGb2xkZXJ9IGZyb20gXCIuL2V2ZW50TGlzdGVuZXJzLmpzXCI7XG5mb2xkZXJBY3Rpb25zLmFkZEV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLCByaWdodENsaWNrTWVudSk7XG4vLyByZW1vdmVzIHRoZSByaWdodCBjbGljayBtZW51IG9yIGRlbGV0ZXMgYSBmb2xkZXIgYW5kIHRoZSBvYmplY3QgZnJvbSBhcnJheVxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihldmVudCkge1xuICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0WzBdID09PSBcInJpZ2h0LWNsaWNrLWl0ZW1cIikge1xuICAgICAgICBkZWxldGVGb2xkZXIoZXZlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZW51XCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgfVxufSk7XG5cbi8vIG9wZW4gTW9kYWwgdG8gY3JlYXRlIGEgbmV3IHRhc2tcbmxldCBidG5PcGVuTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm9wZW4tbW9kYWxcIik7XG5pbXBvcnQge29wZW5Nb2RhbCwgY2xvc2VNb2RhbCwgc3VibWl0VGFza30gZnJvbSBcIi4vZXZlbnRMaXN0ZW5lcnNNb2RhbC5qc1wiO1xuYnRuT3Blbk1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuTW9kYWwpO1xuXG4vLyBjbG9zZSBNb2RhbFxubGV0IGJudENsb3NlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWNsb3NlXCIpO1xuYm50Q2xvc2VNb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VNb2RhbCk7XG5cbmxldCBtb2RhbFN1Ym1pdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFzay1zdWJtXCIpO1xubW9kYWxTdWJtaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHN1Ym1pdFRhc2spO1xuXG4vLyBvcGVuIGEgIHRhc2sgdG8gc2VlIGl0J3MgZGV0YWlsc1xuaW1wb3J0IHtnZXRUYXNrTmFtZX0gZnJvbSBcIi4vZXZlbnRMaXN0ZW5lcnMuanNcIjtcbmxldCB0YXNrRGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYm9keVwiKTtcbnRhc2tEaXNwbGF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBnZXRUYXNrTmFtZSk7Il0sInNvdXJjZVJvb3QiOiIifQ==