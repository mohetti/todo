(()=>{"use strict";var e,t,r={71:(e,t,r)=>{r.d(t,{h7:()=>f,Mr:()=>g,qJ:()=>m,Rh:()=>u,bX:()=>o,w4:()=>i,bY:()=>s,Yc:()=>l,_i:()=>d,F1:()=>a,i8:()=>c});var n=r(256);let o=document.querySelector("#task-title"),i=document.querySelector("#task-descr"),l=document.querySelector("#high"),a=document.querySelector("#medium"),d=document.querySelector("#low"),c=document.querySelector("#task-notes"),s=document.querySelector("#task-date"),u=function(){h.classList.remove("bg-active"),o.value="",i.value="",l.checked=!1,a.checked=!1,d.checked=!1,c.value="",s.value=""},h=document.querySelector(".modal-bg"),f=function(){-1!==n.folderArray.findIndex((e=>!0===e.highlight))&&h.classList.add("bg-active")},g=function(){u()},m=function(){let e=n.folderArray[n.folderArray.findIndex((e=>!0===e.highlight))];return-1!==e.tasks.findIndex((e=>e.title===o.value))?alert("You already have a task with this title."):""===o.value?alert("Please enter a title"):!1===l.checked&&!1===a.checked&&!1===d.checked?alert("Please choose a priority"):void r.e(152).then(r.bind(r,152)).then((t=>{t.appendTaskToFolder(e)}))}},256:(e,t,r)=>{r.r(t),r.d(t,{pushToFolderArray:()=>i,folderArray:()=>o,highlightTrue:()=>l,delListItem:()=>a});var n=r(158);let o=[],i=function(e){return o.push(function(e){let t={};return t.folder=e.value,t.highlight=!1,t.tasks=[],t}(e)),(0,n.q)(),o},l=function(e){return o.map((t=>t.folder===e?t.highlight=!0:t.highlight=!1)),(0,n.q)(),o},a=function(){let e=o.findIndex((e=>!0===e.highlight));return o.splice(e,1),(0,n.q)(),o}},158:(e,t,r)=>{r.d(t,{q:()=>o,$:()=>i});var n=r(256);let o=function(){window.localStorage.clear(),localStorage.setItem("containerArray",JSON.stringify(n.folderArray))},i=function(){let e=localStorage.getItem("containerArray"),t=JSON.parse(e);!function(e){let t=document.getElementById("folder-ul");for(let r=0;r<e.length;r++){let n=document.createElement("li");t.appendChild(n),n.innerText=e[r].folder,n.classList.add("folders")}}(t),function(e){for(let t=0;t<e.length;t++)n.folderArray.push(e[t])}(t),console.log(n.folderArray)}}},n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={exports:{}};return r[e](t,t.exports,o),t.exports}o.m=r,o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,r)=>(o.f[r](e,t),t)),[])),o.u=e=>e+".main.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="todo:",o.l=(r,n,i,l)=>{if(e[r])e[r].push(n);else{var a,d;if(void 0!==i)for(var c=document.getElementsByTagName("script"),s=0;s<c.length;s++){var u=c[s];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+i){a=u;break}}a||(d=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",t+i),a.src=r),e[r]=[n];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var o=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),d&&document.head.appendChild(a)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={179:0};o.f.j=(t,r)=>{var n=o.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise(((r,o)=>{n=e[t]=[r,o]}));r.push(n[2]=i);var l=o.p+o.u(t),a=new Error;o.l(l,(r=>{if(o.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),l=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+l+")",a.name="ChunkLoadError",a.type=i,a.request=l,n[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{for(var n,i,[l,a,d]=r,c=0,s=[];c<l.length;c++)i=l[c],o.o(e,i)&&e[i]&&s.push(e[i][0]),e[i]=0;for(n in a)o.o(a,n)&&(o.m[n]=a[n]);for(d&&d(o),t&&t(r);s.length;)s.shift()()},r=self.webpackChunktodo=self.webpackChunktodo||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{var e=o(158),t=o(256);let r=document.getElementById("new-folder"),n=document.getElementById("folder-ul");var i=o(71);0!==window.localStorage.length&&(0,e.$)(),document.querySelector("#add-new-btn").addEventListener("click",(function(){let e=t.folderArray.findIndex((e=>e.folder===r.value));""!==r.value&&(-1!==e&&0!==t.folderArray.length||(Promise.resolve().then(o.bind(o,256)).then((e=>{e.pushToFolderArray(r)})),o.e(185).then(o.bind(o,185)).then((e=>{e.newFolder(n,r)}))))}));let l=document.querySelector("#folder-ul");l.addEventListener("click",(function(e){if("folder-ul"!==e.target.id){let t=e.target.innerText;Promise.resolve().then(o.bind(o,256)).then((e=>{e.highlightTrue(t)})),o.e(185).then(o.bind(o,185)).then((t=>{t.styleHighlightedFolder(e.target)})),o.e(520).then(o.bind(o,520)).then((e=>{e.displayTasks()}))}})),l.addEventListener("contextmenu",(function(e){e.preventDefault(),e.target.classList.contains("highlight")&&o.e(185).then(o.bind(o,185)).then((t=>{t.rightClickHandler(e)}))})),window.addEventListener("click",(function(e){"right-click-item"===e.target.classList[0]?(o.e(185).then(o.bind(o,185)).then((e=>{e.delFromList()})),Promise.resolve().then(o.bind(o,256)).then((e=>{e.delListItem()}))):document.getElementById("menu").classList.remove("active")})),document.querySelector(".open-modal").addEventListener("click",i.h7),document.querySelector(".modal-close").addEventListener("click",i.Mr),document.querySelector("#task-subm").addEventListener("click",i.qJ),document.querySelector("#body").addEventListener("click",(function(e){if("body"!==e.target.id&&(e.target.classList.contains("task-display")||e.target.parentElement.classList.contains("task-display"))){let t;t=void 0===e.target.firstChild.innerText?e.target.parentElement.firstChild.innerText:e.target.firstChild.innerText,o.e(520).then(o.bind(o,520)).then((e=>{e.openTask(t)}))}}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvL3dlYnBhY2svcnVudGltZS9sb2FkIHNjcmlwdCIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL2V2ZW50TGlzdGVuZXJzTW9kYWwuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9mb2xkZXJMb2dpYy5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL2xvY2FsU3RvcmFnZS5qcyIsIndlYnBhY2s6Ly90b2RvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RvZG8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvZG8vd2VicGFjay9ydW50aW1lL2Vuc3VyZSBjaHVuayIsIndlYnBhY2s6Ly90b2RvL3dlYnBhY2svcnVudGltZS9nZXQgamF2YXNjcmlwdCBjaHVuayBmaWxlbmFtZSIsIndlYnBhY2s6Ly90b2RvL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vdG9kby93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RvZG8vd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly90b2RvL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3RvZG8vd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9ldmVudExpc3RlbmVycy5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbImluUHJvZ3Jlc3MiLCJkYXRhV2VicGFja1ByZWZpeCIsInRhc2tUaXRsZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRhc2tEZXNjciIsInByaW9IaWdoIiwicHJpb01lZCIsInByaW9Mb3ciLCJ0YXNrTm90ZXMiLCJ0YXNrRGF0ZSIsInNldERlZmF1bHQiLCJtb2RhbEJnIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidmFsdWUiLCJjaGVja2VkIiwib3Blbk1vZGFsIiwiZm9sZGVyQXJyYXkiLCJ4IiwiaGlnaGxpZ2h0IiwiYWRkIiwiY2xvc2VNb2RhbCIsInN1Ym1pdFRhc2siLCJhcHBlbmRUbyIsInRhc2tzIiwiZmluZEluZGV4IiwidGl0bGUiLCJhbGVydCIsInRoZW4iLCJhcHBlbmQiLCJhcHBlbmRUYXNrVG9Gb2xkZXIiLCJwdXNoVG9Gb2xkZXJBcnJheSIsImZvbGRlck5hbWUiLCJwdXNoIiwibmV3T2JqIiwiY3JlYXRlRm9sZGVyT2JqIiwiaGlnaGxpZ2h0VHJ1ZSIsImlubmVyVGV4dCIsIm1hcCIsImZvbGRlciIsImRlbExpc3RJdGVtIiwiYXJyYXlJbmRleCIsInNwbGljZSIsInNldExvY2FsU3RvcmFnZSIsIndpbmRvdyIsImxvY2FsU3RvcmFnZSIsImNsZWFyIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJnZXRMb2NhbFN0b3JhZ2UiLCJzdG9yYWdlQXJyYXkiLCJnZXRJdGVtIiwiZ2V0QXJyYXkiLCJwYXJzZSIsImFycmF5IiwiZm9sZGVyRGlzcGxheSIsImdldEVsZW1lbnRCeUlkIiwiaSIsImxlbmd0aCIsImxpIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwicG9wdWxhdGVGb2xkZXIiLCJwb3B1bGF0ZUFycmF5IiwiY29uc29sZSIsImxvZyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibSIsImQiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsImYiLCJlIiwiY2h1bmtJZCIsIlByb21pc2UiLCJhbGwiLCJrZXlzIiwicmVkdWNlIiwicHJvbWlzZXMiLCJ1IiwiZyIsImdsb2JhbFRoaXMiLCJ0aGlzIiwiRnVuY3Rpb24iLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwibCIsInVybCIsImRvbmUiLCJzY3JpcHQiLCJuZWVkQXR0YWNoIiwidW5kZWZpbmVkIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicyIsImdldEF0dHJpYnV0ZSIsImNoYXJzZXQiLCJ0aW1lb3V0IiwibmMiLCJzZXRBdHRyaWJ1dGUiLCJzcmMiLCJvblNjcmlwdENvbXBsZXRlIiwicHJldiIsImV2ZW50Iiwib25lcnJvciIsIm9ubG9hZCIsImNsZWFyVGltZW91dCIsImRvbmVGbnMiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJmb3JFYWNoIiwiZm4iLCJzZXRUaW1lb3V0IiwiYmluZCIsInR5cGUiLCJ0YXJnZXQiLCJoZWFkIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiY3VycmVudFNjcmlwdCIsIkVycm9yIiwicmVwbGFjZSIsInAiLCJpbnN0YWxsZWRDaHVua3MiLCIxNzkiLCJqIiwiaW5zdGFsbGVkQ2h1bmtEYXRhIiwicHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJlcnJvciIsImVycm9yVHlwZSIsInJlYWxTcmMiLCJtZXNzYWdlIiwibmFtZSIsInJlcXVlc3QiLCJ3ZWJwYWNrSnNvbnBDYWxsYmFjayIsInBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uIiwiZGF0YSIsImNodW5rSWRzIiwibW9yZU1vZHVsZXMiLCJydW50aW1lIiwicmVzb2x2ZXMiLCJzaGlmdCIsImNodW5rTG9hZGluZ0dsb2JhbCIsInNlbGYiLCJhZGRFdmVudExpc3RlbmVyIiwiZHVwbGljYXRlc1RydWUiLCJuZXdGb2xkZXIiLCJuZXdFbnRyeSIsImZvbGRlckFjdGlvbnMiLCJpZCIsImhpZ2hsaWdodGluZyIsImhpZ2hsaWdodENTUyIsInN0eWxlSGlnaGxpZ2h0ZWRGb2xkZXIiLCJkaXNwbGF5IiwiZGlzcGxheVRhc2tzIiwicHJldmVudERlZmF1bHQiLCJjb250YWlucyIsInJpZ2h0Q2xpY2siLCJyaWdodENsaWNrSGFuZGxlciIsImRlbEl0ZW0iLCJkZWxGcm9tTGlzdCIsInBhcmVudEVsZW1lbnQiLCJzZWFyY2hUZXJtIiwiZmlyc3RDaGlsZCIsIm9wZW4iLCJvcGVuVGFzayJdLCJtYXBwaW5ncyI6InVCQUFJQSxFQUNBQyxFLHlJQ0FKLElBQUlDLEVBQVlDLFNBQVNDLGNBQWMsZUFDbkNDLEVBQVlGLFNBQVNDLGNBQWMsZUFDbkNFLEVBQVdILFNBQVNDLGNBQWMsU0FDbENHLEVBQVVKLFNBQVNDLGNBQWMsV0FDakNJLEVBQVVMLFNBQVNDLGNBQWMsUUFDakNLLEVBQVlOLFNBQVNDLGNBQWMsZUFDbkNNLEVBQVdQLFNBQVNDLGNBQWMsY0FHbENPLEVBQWEsV0FDYkMsRUFBUUMsVUFBVUMsT0FBTyxhQUN6QlosRUFBVWEsTUFBUSxHQUNsQlYsRUFBVVUsTUFBUSxHQUNsQlQsRUFBU1UsU0FBVSxFQUNuQlQsRUFBUVMsU0FBVSxFQUNsQlIsRUFBUVEsU0FBVSxFQUNsQlAsRUFBVU0sTUFBUSxHQUNsQkwsRUFBU0ssTUFBUSxJQUlqQkgsRUFBVVQsU0FBU0MsY0FBYyxhQUNqQ2EsRUFBWSxZQUM4QyxJQUF0RCxFQUFBQyxZQUFBLFdBQXNCQyxJQUFxQixJQUFoQkEsRUFBRUMsYUFDN0JSLEVBQVFDLFVBQVVRLElBQUksY0FLMUJDLEVBQWEsV0FDYlgsS0FJQVksRUFBYSxXQUNiLElBQUlDLEVBQVksRUFBQU4sWUFBWSxFQUFBQSxZQUFBLFdBQXNCQyxJQUFxQixJQUFoQkEsRUFBRUMsYUFFekQsT0FBd0IsSUFESEksRUFBU0MsTUFBTUMsV0FBVVAsR0FBS0EsRUFBRVEsUUFBVXpCLEVBQVVhLFFBRTlEYSxNQUFNLDRDQUVPLEtBQXBCMUIsRUFBVWEsTUFDSGEsTUFBTSx5QkFDZSxJQUFyQnRCLEVBQVNVLFVBQXlDLElBQXBCVCxFQUFRUyxVQUF5QyxJQUFwQlIsRUFBUVEsUUFDbkVZLE1BQU0saUNBRWIsNkJBQXFCQyxNQUFLQyxJQUN0QkEsRUFB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WCxTQUFTQyxjQUFjLGVBRTdCaUssaUJBQWlCLFFBQVMsTUFHbkJsSyxTQUFTQyxjQUFjLGdCQUM3QmlLLGlCQUFpQixRQUFTLE1BRXRCbEssU0FBU0MsY0FBYyxjQUM3QmlLLGlCQUFpQixRQUFTLE1BSXBCbEssU0FBU0MsY0FBYyxTQUM3QmlLLGlCQUFpQixTRGVYLFNBQXNCL0MsR0FDcEMsR0FBd0IsU0FBcEJBLEVBQU1ZLE9BQU93QyxLQUVOcEQsRUFBTVksT0FBT3JILFVBQVVvSyxTQUFTLGlCQUN6QzNELEVBQU1ZLE9BQU9vRCxjQUFjekssVUFBVW9LLFNBQVMsaUJBQWlCLENBQzdELElBQUlNLEVBQzhDQSxPQUFaN0UsSUFBdENZLEVBQU1ZLE9BQU9zRCxXQUFXbEosVUFBdUNnRixFQUFNWSxPQUFPb0QsY0FBY0UsV0FBV2xKLFVBQ3RDZ0YsRUFBTVksT0FBT3NELFdBQVdsSixVQUV2Riw2QkFBd0JULE1BQUs0SixJQUN6QkEsRUFBS0MsU0FBU0gsVyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGluUHJvZ3Jlc3MgPSB7fTtcbnZhciBkYXRhV2VicGFja1ByZWZpeCA9IFwidG9kbzpcIjtcbi8vIGxvYWRTY3JpcHQgZnVuY3Rpb24gdG8gbG9hZCBhIHNjcmlwdCB2aWEgc2NyaXB0IHRhZ1xuX193ZWJwYWNrX3JlcXVpcmVfXy5sID0gKHVybCwgZG9uZSwga2V5LCBjaHVua0lkKSA9PiB7XG5cdGlmKGluUHJvZ3Jlc3NbdXJsXSkgeyBpblByb2dyZXNzW3VybF0ucHVzaChkb25lKTsgcmV0dXJuOyB9XG5cdHZhciBzY3JpcHQsIG5lZWRBdHRhY2g7XG5cdGlmKGtleSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc2NyaXB0cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIHMgPSBzY3JpcHRzW2ldO1xuXHRcdFx0aWYocy5nZXRBdHRyaWJ1dGUoXCJzcmNcIikgPT0gdXJsIHx8IHMuZ2V0QXR0cmlidXRlKFwiZGF0YS13ZWJwYWNrXCIpID09IGRhdGFXZWJwYWNrUHJlZml4ICsga2V5KSB7IHNjcmlwdCA9IHM7IGJyZWFrOyB9XG5cdFx0fVxuXHR9XG5cdGlmKCFzY3JpcHQpIHtcblx0XHRuZWVkQXR0YWNoID0gdHJ1ZTtcblx0XHRzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblxuXHRcdHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04Jztcblx0XHRzY3JpcHQudGltZW91dCA9IDEyMDtcblx0XHRpZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5uYykge1xuXHRcdFx0c2NyaXB0LnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIF9fd2VicGFja19yZXF1aXJlX18ubmMpO1xuXHRcdH1cblx0XHRzY3JpcHQuc2V0QXR0cmlidXRlKFwiZGF0YS13ZWJwYWNrXCIsIGRhdGFXZWJwYWNrUHJlZml4ICsga2V5KTtcblx0XHRzY3JpcHQuc3JjID0gdXJsO1xuXHR9XG5cdGluUHJvZ3Jlc3NbdXJsXSA9IFtkb25lXTtcblx0dmFyIG9uU2NyaXB0Q29tcGxldGUgPSAocHJldiwgZXZlbnQpID0+IHtcblx0XHQvLyBhdm9pZCBtZW0gbGVha3MgaW4gSUUuXG5cdFx0c2NyaXB0Lm9uZXJyb3IgPSBzY3JpcHQub25sb2FkID0gbnVsbDtcblx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdFx0dmFyIGRvbmVGbnMgPSBpblByb2dyZXNzW3VybF07XG5cdFx0ZGVsZXRlIGluUHJvZ3Jlc3NbdXJsXTtcblx0XHRzY3JpcHQucGFyZW50Tm9kZSAmJiBzY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXHRcdGRvbmVGbnMgJiYgZG9uZUZucy5mb3JFYWNoKChmbikgPT4gZm4oZXZlbnQpKTtcblx0XHRpZihwcmV2KSByZXR1cm4gcHJldihldmVudCk7XG5cdH1cblx0O1xuXHR2YXIgdGltZW91dCA9IHNldFRpbWVvdXQob25TY3JpcHRDb21wbGV0ZS5iaW5kKG51bGwsIHVuZGVmaW5lZCwgeyB0eXBlOiAndGltZW91dCcsIHRhcmdldDogc2NyaXB0IH0pLCAxMjAwMDApO1xuXHRzY3JpcHQub25lcnJvciA9IG9uU2NyaXB0Q29tcGxldGUuYmluZChudWxsLCBzY3JpcHQub25lcnJvcik7XG5cdHNjcmlwdC5vbmxvYWQgPSBvblNjcmlwdENvbXBsZXRlLmJpbmQobnVsbCwgc2NyaXB0Lm9ubG9hZCk7XG5cdG5lZWRBdHRhY2ggJiYgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xufTsiLCJpbXBvcnQge2ZvbGRlckFycmF5fSBmcm9tIFwiLi9mb2xkZXJMb2dpYy5qc1wiO1xubGV0IHRhc2tUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFzay10aXRsZVwiKTtcbmxldCB0YXNrRGVzY3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2stZGVzY3JcIik7XG5sZXQgcHJpb0hpZ2ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2hpZ2hcIik7XG5sZXQgcHJpb01lZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWVkaXVtXCIpO1xubGV0IHByaW9Mb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2xvd1wiKTtcbmxldCB0YXNrTm90ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2stbm90ZXNcIik7XG5sZXQgdGFza0RhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2stZGF0ZVwiKTtcblxuXG5sZXQgc2V0RGVmYXVsdCA9IChmdW5jdGlvbiBzZXREZWZhdWx0KCkge1xuICAgIG1vZGFsQmcuY2xhc3NMaXN0LnJlbW92ZShcImJnLWFjdGl2ZVwiKTtcbiAgICB0YXNrVGl0bGUudmFsdWUgPSBcIlwiO1xuICAgIHRhc2tEZXNjci52YWx1ZSA9IFwiXCI7XG4gICAgcHJpb0hpZ2guY2hlY2tlZCA9IGZhbHNlO1xuICAgIHByaW9NZWQuY2hlY2tlZCA9IGZhbHNlO1xuICAgIHByaW9Mb3cuY2hlY2tlZCA9IGZhbHNlO1xuICAgIHRhc2tOb3Rlcy52YWx1ZSA9IFwiXCI7XG4gICAgdGFza0RhdGUudmFsdWUgPSBcIlwiO1xufSk7XG5cbi8vIG9wZW5zIG1vZGFsIHRvIGNyZWF0ZSBuZXcgdGFza1xubGV0IG1vZGFsQmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWJnXCIpO1xubGV0IG9wZW5Nb2RhbCA9IChmdW5jdGlvbiBvcGVuTW9kYWwoKSB7XG4gICAgaWYgKGZvbGRlckFycmF5LmZpbmRJbmRleCh4ID0+IHguaGlnaGxpZ2h0ID09PSB0cnVlKSAhPT0gLTEpIHtcbiAgICAgICAgbW9kYWxCZy5jbGFzc0xpc3QuYWRkKFwiYmctYWN0aXZlXCIpO1xuICAgIH07XG59KTtcblxuLy8gY2xvc2VzIG1vZGFsXG5sZXQgY2xvc2VNb2RhbCA9IChmdW5jdGlvbiBjbG9zZU1vZGFsKCkge1xuICAgIHNldERlZmF1bHQoKTtcbn0pO1xuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4vLyBzdWJtaXRzIG5ldyB0YXNrXG5sZXQgc3VibWl0VGFzayA9IChmdW5jdGlvbiBzdWJtaXRUYXNrKCkge1xuICAgIGxldCBhcHBlbmRUbyAgPSBmb2xkZXJBcnJheVtmb2xkZXJBcnJheS5maW5kSW5kZXgoeCA9PiB4LmhpZ2hsaWdodCA9PT0gdHJ1ZSldO1xuICAgIGxldCBkdXBsaWNhdGVUYXNrcyA9IGFwcGVuZFRvLnRhc2tzLmZpbmRJbmRleCh4ID0+IHgudGl0bGUgPT09IHRhc2tUaXRsZS52YWx1ZSk7XG4gICAgaWYgKGR1cGxpY2F0ZVRhc2tzICE9PSAtMSkge1xuICAgICAgICByZXR1cm4gYWxlcnQoXCJZb3UgYWxyZWFkeSBoYXZlIGEgdGFzayB3aXRoIHRoaXMgdGl0bGUuXCIpO1xuICAgIH1cbiAgICBpZiAodGFza1RpdGxlLnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgIHJldHVybiBhbGVydChcIlBsZWFzZSBlbnRlciBhIHRpdGxlXCIpO1xuICAgIH0gZWxzZSBpZiAocHJpb0hpZ2guY2hlY2tlZCA9PT0gZmFsc2UgJiYgcHJpb01lZC5jaGVja2VkID09PSBmYWxzZSAmJiBwcmlvTG93LmNoZWNrZWQgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBhbGVydChcIlBsZWFzZSBjaG9vc2UgYSBwcmlvcml0eVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpbXBvcnQoXCIuL3Rhc2tzLmpzXCIpLnRoZW4oYXBwZW5kID0+IHtcbiAgICAgICAgICAgIGFwcGVuZC5hcHBlbmRUYXNrVG9Gb2xkZXIoYXBwZW5kVG8pO1xuICAgICAgICB9KTtcbiAgICB9O1xufSk7XG5cbmV4cG9ydCB7b3Blbk1vZGFsLCBjbG9zZU1vZGFsLCBzdWJtaXRUYXNrLCBzZXREZWZhdWx0LCB0YXNrVGl0bGUsIHRhc2tEZXNjciwgdGFza0RhdGUsIHByaW9IaWdoLCBwcmlvTG93LCBwcmlvTWVkLCB0YXNrTm90ZXN9IiwibGV0IGZvbGRlckFycmF5ID0gW107XG5pbXBvcnQge3NldExvY2FsU3RvcmFnZX0gZnJvbSBcIi4vbG9jYWxTdG9yYWdlLmpzXCI7XG5sZXQgY3JlYXRlRm9sZGVyT2JqID0gZnVuY3Rpb24gY3JlYXRlRm9sZGVyT2JqKGZvbGRlck5hbWUpIHtcbiAgICBsZXQgbmV3T2JqID0ge307XG4gICAgbmV3T2JqW1wiZm9sZGVyXCJdID0gZm9sZGVyTmFtZS52YWx1ZTtcbiAgICBuZXdPYmpbXCJoaWdobGlnaHRcIl0gPSBmYWxzZTtcbiAgICBuZXdPYmpbXCJ0YXNrc1wiXSA9IFtdO1xuICAgIHJldHVybiAobmV3T2JqKTtcbn1cblxubGV0IHB1c2hUb0ZvbGRlckFycmF5ID0gZnVuY3Rpb24gcHVzaFRvRm9sZGVyQXJyYXkoZm9sZGVyTmFtZSkge1xuICAgIGZvbGRlckFycmF5LnB1c2goY3JlYXRlRm9sZGVyT2JqKGZvbGRlck5hbWUpKTtcbiAgICBzZXRMb2NhbFN0b3JhZ2UoKTtcbiAgICByZXR1cm4gZm9sZGVyQXJyYXk7ICBcbn1cbmxldCBoaWdobGlnaHRUcnVlID0gZnVuY3Rpb24gaGlnaGxpZ2h0VHJ1ZShpbm5lclRleHQpIHtcbiAgICBmb2xkZXJBcnJheS5tYXAoKHgpID0+ICh4LmZvbGRlciA9PT0gaW5uZXJUZXh0ID8geC5oaWdobGlnaHQgPSB0cnVlIDogeC5oaWdobGlnaHQgPSBmYWxzZSkpO1xuICAgIHNldExvY2FsU3RvcmFnZSgpO1xuICAgIHJldHVybiBmb2xkZXJBcnJheTtcbn07XG5sZXQgZGVsTGlzdEl0ZW0gPSAoZnVuY3Rpb24gZGVsTGlzdEl0ZW0oKSB7XG4gICAgbGV0IGFycmF5SW5kZXggPSBmb2xkZXJBcnJheS5maW5kSW5kZXgoeCA9PiB4LmhpZ2hsaWdodCA9PT0gdHJ1ZSk7XG4gICAgZm9sZGVyQXJyYXkuc3BsaWNlKGFycmF5SW5kZXgsIDEpO1xuICAgIHNldExvY2FsU3RvcmFnZSgpO1xuICAgIHJldHVybiBmb2xkZXJBcnJheTtcbn0pO1xuXG5leHBvcnQge3B1c2hUb0ZvbGRlckFycmF5LCBmb2xkZXJBcnJheSwgaGlnaGxpZ2h0VHJ1ZSwgZGVsTGlzdEl0ZW19OyIsImltcG9ydCB7Zm9sZGVyQXJyYXl9IGZyb20gXCIuL2ZvbGRlckxvZ2ljLmpzXCI7XG5sZXQgc2V0TG9jYWxTdG9yYWdlID0gKGZ1bmN0aW9uIHNldExvY2FsU3RvcmFnZSgpIHtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjb250YWluZXJBcnJheVwiLCBKU09OLnN0cmluZ2lmeShmb2xkZXJBcnJheSkpO1xufSk7XG5cbmxldCBwb3B1bGF0ZUZvbGRlciA9IChmdW5jdGlvbiBwb3B1bGF0ZUZvbGRlcihhcnJheSkge1xuICAgIGxldCBmb2xkZXJEaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb2xkZXItdWxcIik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgICAgIGZvbGRlckRpc3BsYXkuYXBwZW5kQ2hpbGQobGkpO1xuICAgICAgICBsaS5pbm5lclRleHQgPSBhcnJheVtpXS5mb2xkZXI7XG4gICAgICAgIGxpLmNsYXNzTGlzdC5hZGQoXCJmb2xkZXJzXCIpO1xuICAgIH07XG59KTtcblxubGV0IHBvcHVsYXRlQXJyYXkgPSAoZnVuY3Rpb24gcG9wdWxhdGVBcnJheShhcnJheSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZm9sZGVyQXJyYXkucHVzaChhcnJheVtpXSk7XG4gICAgfTtcbn0pO1xuXG5sZXQgZ2V0TG9jYWxTdG9yYWdlID0gKGZ1bmN0aW9uIGdldExvY2FsU3RvcmFnZSgpIHtcbiAgICBsZXQgc3RvcmFnZUFycmF5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjb250YWluZXJBcnJheVwiKTtcbiAgICBsZXQgZ2V0QXJyYXkgPSBKU09OLnBhcnNlKHN0b3JhZ2VBcnJheSk7XG4gICAgcG9wdWxhdGVGb2xkZXIoZ2V0QXJyYXkpO1xuICAgIHBvcHVsYXRlQXJyYXkoZ2V0QXJyYXkpO1xuICAgIGNvbnNvbGUubG9nKGZvbGRlckFycmF5KTtcbn0pO1xuXG5leHBvcnQge3NldExvY2FsU3RvcmFnZSwgZ2V0TG9jYWxTdG9yYWdlfTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmYgPSB7fTtcbi8vIFRoaXMgZmlsZSBjb250YWlucyBvbmx5IHRoZSBlbnRyeSBjaHVuay5cbi8vIFRoZSBjaHVuayBsb2FkaW5nIGZ1bmN0aW9uIGZvciBhZGRpdGlvbmFsIGNodW5rc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5lID0gKGNodW5rSWQpID0+IHtcblx0cmV0dXJuIFByb21pc2UuYWxsKE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uZikucmVkdWNlKChwcm9taXNlcywga2V5KSA9PiB7XG5cdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5mW2tleV0oY2h1bmtJZCwgcHJvbWlzZXMpO1xuXHRcdHJldHVybiBwcm9taXNlcztcblx0fSwgW10pKTtcbn07IiwiLy8gVGhpcyBmdW5jdGlvbiBhbGxvdyB0byByZWZlcmVuY2UgYXN5bmMgY2h1bmtzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnUgPSAoY2h1bmtJZCkgPT4ge1xuXHQvLyByZXR1cm4gdXJsIGZvciBmaWxlbmFtZXMgYmFzZWQgb24gdGVtcGxhdGVcblx0cmV0dXJuIFwiXCIgKyBjaHVua0lkICsgXCIubWFpbi5qc1wiO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjXG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkgc2NyaXB0VXJsID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdLnNyY1xuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFByb21pc2UgPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQxNzk6IDBcbn07XG5cblxuX193ZWJwYWNrX3JlcXVpcmVfXy5mLmogPSAoY2h1bmtJZCwgcHJvbWlzZXMpID0+IHtcblx0XHQvLyBKU09OUCBjaHVuayBsb2FkaW5nIGZvciBqYXZhc2NyaXB0XG5cdFx0dmFyIGluc3RhbGxlZENodW5rRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpID8gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdIDogdW5kZWZpbmVkO1xuXHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSAhPT0gMCkgeyAvLyAwIG1lYW5zIFwiYWxyZWFkeSBpbnN0YWxsZWRcIi5cblxuXHRcdFx0Ly8gYSBQcm9taXNlIG1lYW5zIFwiY3VycmVudGx5IGxvYWRpbmdcIi5cblx0XHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSkge1xuXHRcdFx0XHRwcm9taXNlcy5wdXNoKGluc3RhbGxlZENodW5rRGF0YVsyXSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZih0cnVlKSB7IC8vIGFsbCBjaHVua3MgaGF2ZSBKU1xuXHRcdFx0XHRcdC8vIHNldHVwIFByb21pc2UgaW4gY2h1bmsgY2FjaGVcblx0XHRcdFx0XHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0XHRcdGluc3RhbGxlZENodW5rRGF0YSA9IGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IFtyZXNvbHZlLCByZWplY3RdO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHByb21pc2VzLnB1c2goaW5zdGFsbGVkQ2h1bmtEYXRhWzJdID0gcHJvbWlzZSk7XG5cblx0XHRcdFx0XHQvLyBzdGFydCBjaHVuayBsb2FkaW5nXG5cdFx0XHRcdFx0dmFyIHVybCA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIF9fd2VicGFja19yZXF1aXJlX18udShjaHVua0lkKTtcblx0XHRcdFx0XHQvLyBjcmVhdGUgZXJyb3IgYmVmb3JlIHN0YWNrIHVud291bmQgdG8gZ2V0IHVzZWZ1bCBzdGFja3RyYWNlIGxhdGVyXG5cdFx0XHRcdFx0dmFyIGVycm9yID0gbmV3IEVycm9yKCk7XG5cdFx0XHRcdFx0dmFyIGxvYWRpbmdFbmRlZCA9IChldmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkpIHtcblx0XHRcdFx0XHRcdFx0aW5zdGFsbGVkQ2h1bmtEYXRhID0gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdO1xuXHRcdFx0XHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEgIT09IDApIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIGVycm9yVHlwZSA9IGV2ZW50ICYmIChldmVudC50eXBlID09PSAnbG9hZCcgPyAnbWlzc2luZycgOiBldmVudC50eXBlKTtcblx0XHRcdFx0XHRcdFx0XHR2YXIgcmVhbFNyYyA9IGV2ZW50ICYmIGV2ZW50LnRhcmdldCAmJiBldmVudC50YXJnZXQuc3JjO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9yLm1lc3NhZ2UgPSAnTG9hZGluZyBjaHVuayAnICsgY2h1bmtJZCArICcgZmFpbGVkLlxcbignICsgZXJyb3JUeXBlICsgJzogJyArIHJlYWxTcmMgKyAnKSc7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IubmFtZSA9ICdDaHVua0xvYWRFcnJvcic7XG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3IudHlwZSA9IGVycm9yVHlwZTtcblx0XHRcdFx0XHRcdFx0XHRlcnJvci5yZXF1ZXN0ID0gcmVhbFNyYztcblx0XHRcdFx0XHRcdFx0XHRpbnN0YWxsZWRDaHVua0RhdGFbMV0oZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmwodXJsLCBsb2FkaW5nRW5kZWQsIFwiY2h1bmstXCIgKyBjaHVua0lkLCBjaHVua0lkKTtcblx0XHRcdFx0fSBlbHNlIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG5cdFx0XHR9XG5cdFx0fVxufTtcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuLy8gbm8gZGVmZXJyZWQgc3RhcnR1cFxuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IChwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkgPT4ge1xuXHR2YXIgW2NodW5rSWRzLCBtb3JlTW9kdWxlcywgcnVudGltZV0gPSBkYXRhO1xuXHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcblx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG5cdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIHJlc29sdmVzID0gW107XG5cdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdFx0cmVzb2x2ZXMucHVzaChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0pO1xuXHRcdH1cblx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuXHR9XG5cdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdH1cblx0fVxuXHRpZihydW50aW1lKSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHRpZihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbikgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG5cdHdoaWxlKHJlc29sdmVzLmxlbmd0aCkge1xuXHRcdHJlc29sdmVzLnNoaWZ0KCkoKTtcblx0fVxuXG59XG5cbnZhciBjaHVua0xvYWRpbmdHbG9iYWwgPSBzZWxmW1wid2VicGFja0NodW5rdG9kb1wiXSA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmt0b2RvXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTtcblxuLy8gbm8gZGVmZXJyZWQgc3RhcnR1cCIsIi8vIGNvbmNlcm5zIGZvbGRlckxvZ2ljLmpzIGFuZCBkb21Gb2xkZXIuanNcbmxldCBmb2xkZXJOYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXctZm9sZGVyXCIpO1xubGV0IGZvbGRlckRpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvbGRlci11bFwiKTtcbmltcG9ydCB7Zm9sZGVyQXJyYXl9IGZyb20gXCIuL2ZvbGRlckxvZ2ljLmpzXCI7XG5cbmxldCBoYW5kbGVOZXdGb2xkZXIgPSAoZnVuY3Rpb24gaGFuZGxlTmV3Rm9sZGVyKCkge1xuICAgIGxldCBkdXBsaWNhdGVzVHJ1ZSA9IGZvbGRlckFycmF5LmZpbmRJbmRleCh4ID0+IHguZm9sZGVyID09PSBmb2xkZXJOYW1lLnZhbHVlKTtcbiAgICBpZiAoZm9sZGVyTmFtZS52YWx1ZSA9PT0gXCJcIikge1xuICAgICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmIChkdXBsaWNhdGVzVHJ1ZSA9PT0gLTEgfHwgZm9sZGVyQXJyYXkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIHBvcHVsYXRlIGFycmF5IHdpdGggb2JqZWN0cyBmb3IgZWFjaCBuZXcgZm9sZGVyXG4gICAgICAgIGltcG9ydChcIi4vZm9sZGVyTG9naWMuanNcIikudGhlbihuZXdGb2xkZXIgPT4ge1xuICAgICAgICAgICAgbmV3Rm9sZGVyLnB1c2hUb0ZvbGRlckFycmF5KGZvbGRlck5hbWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gcG9wdWxhdGUgdGhlIGRpc3BsYXkgd2l0aCBvbmUgPGxpPiBmb3IgZWFjaCBuZXcgZm9sZGVyXG4gICAgICAgIGltcG9ydChcIi4vZG9tRm9sZGVyLmpzXCIpLnRoZW4obmV3RW50cnkgPT4ge1xuICAgICAgICAgICAgbmV3RW50cnkubmV3Rm9sZGVyKGZvbGRlckRpc3BsYXksIGZvbGRlck5hbWUpO1xuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuLy8gaGlnaGxpZ2h0aW5nIG9uZSBmb2xkZXIgKG9iai5oaWdobGlnaHQgPSB0cnVlKSBhbmQgYmFja2dyb3VuZGNvbG9yID0gY29sb3JcbmxldCBoaWdobGlnaHQgPSAoZnVuY3Rpb24gaGlnaGxpZ2h0KGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnRhcmdldC5pZCA9PT0gXCJmb2xkZXItdWxcIikge1xuICAgICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGlubmVyVGV4dCA9IGV2ZW50LnRhcmdldC5pbm5lclRleHQ7XG4gICAgICAgICAgICBpbXBvcnQoXCIuL2ZvbGRlckxvZ2ljLmpzXCIpLnRoZW4oaGlnaGxpZ2h0aW5nID0+IHtcbiAgICAgICAgICAgICAgICBoaWdobGlnaHRpbmcuaGlnaGxpZ2h0VHJ1ZShpbm5lclRleHQpO1xuICAgICAgICB9KTtcbiAgICAgICAgICAgIGltcG9ydChcIi4vZG9tRm9sZGVyLmpzXCIpLnRoZW4oaGlnaGxpZ2h0Q1NTID0+IHtcbiAgICAgICAgICAgICAgICBoaWdobGlnaHRDU1Muc3R5bGVIaWdobGlnaHRlZEZvbGRlcihldmVudC50YXJnZXQpO1xuICAgICAgICB9KTtcbiAgICAgICAgaW1wb3J0KFwiLi90YXNrc0RPTS5qc1wiKS50aGVuKGRpc3BsYXkgPT4ge1xuICAgICAgICAgICAgZGlzcGxheS5kaXNwbGF5VGFza3MoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn0pO1xuXG4vLyBwb3AgdXAgcmlnaHQtY2xpY2sgbWVudVxubGV0IHJpZ2h0Q2xpY2tNZW51ID0gKGZ1bmN0aW9uIHJpZ2h0Q2xpY2tNZW51KGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImhpZ2hsaWdodFwiKSkge1xuICAgICAgICBpbXBvcnQoXCIuL2RvbUZvbGRlci5qc1wiKS50aGVuKHJpZ2h0Q2xpY2sgPT4ge1xuICAgICAgICAgICAgcmlnaHRDbGljay5yaWdodENsaWNrSGFuZGxlcihldmVudCkgIFxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm47XG4gICAgfVxufSk7XG5cbi8vIGRlbGV0ZSBhIEZvbGRlclxubGV0IGRlbGV0ZUZvbGRlciA9IChmdW5jdGlvbiBkZWxldGVGb2xkZXIoZXZlbnQpIHtcbiAgICBpbXBvcnQoXCIuL2RvbUZvbGRlci5qc1wiKS50aGVuKGRlbEl0ZW0gPT4ge1xuICAgICAgICBkZWxJdGVtLmRlbEZyb21MaXN0KCkgIFxuICAgIH0pO1xuICAgIGltcG9ydChcIi4vZm9sZGVyTG9naWMuanNcIikudGhlbihkZWxJdGVtID0+IHtcbiAgICAgICAgZGVsSXRlbS5kZWxMaXN0SXRlbSgpICBcbiAgICB9KTtcbn0pO1xuXG5sZXQgZ2V0VGFza05hbWUgPSAoZnVuY3Rpb24gZ2V0VGFza05hbWUoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmlkID09PSBcImJvZHlcIikge1xuICAgICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGFzay1kaXNwbGF5XCIpIHx8IFxuICAgICAgZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGFzay1kaXNwbGF5XCIpKSB7XG4gICAgICAgIGxldCBzZWFyY2hUZXJtO1xuICAgICAgICBldmVudC50YXJnZXQuZmlyc3RDaGlsZC5pbm5lclRleHQgPT09IHVuZGVmaW5lZCA/IHNlYXJjaFRlcm0gPSBldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5maXJzdENoaWxkLmlubmVyVGV4dCA6IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaFRlcm0gPSBldmVudC50YXJnZXQuZmlyc3RDaGlsZC5pbm5lclRleHQ7XG4gICAgICAgIFxuICAgICAgICBpbXBvcnQoXCIuL3Rhc2tzRE9NLmpzXCIpLnRoZW4ob3BlbiA9PiB7XG4gICAgICAgICAgICBvcGVuLm9wZW5UYXNrKHNlYXJjaFRlcm0pICBcbiAgICAgICAgfSk7XG4gICAgfTtcbn0pO1xuXG5leHBvcnQge2hhbmRsZU5ld0ZvbGRlciwgaGlnaGxpZ2h0LCByaWdodENsaWNrTWVudSwgZGVsZXRlRm9sZGVyLCBnZXRUYXNrTmFtZX07IiwiLy8gbnB4IHdlYnBhY2sgLS13YXRjaFxuaW1wb3J0IHtnZXRMb2NhbFN0b3JhZ2UsIGdldEFycmF5fSBmcm9tIFwiLi9sb2NhbFN0b3JhZ2UuanNcIjtcbmltcG9ydCB7Zm9sZGVyQXJyYXl9IGZyb20gXCIuL2ZvbGRlckxvZ2ljLmpzXCI7XG5pZiAod2luZG93LmxvY2FsU3RvcmFnZS5sZW5ndGggIT09IDApIHtcbiAgICBnZXRMb2NhbFN0b3JhZ2UoKTtcbn1cbi8vIDIgRXZlbnRMaXN0ZW5lcnM6IEFkZCBhIG5ldyBmb2xkZXIgdG8gdGhlIERPTS1saXN0IGFzIDxsaT4gYW5kIHRvIHRoZSBDb250YWluZXItQXJyYXkgYXMgb2JqZWN0XG5sZXQgYnRuTmV3Rm9sZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtbmV3LWJ0blwiKTtcbmltcG9ydCB7aGFuZGxlTmV3Rm9sZGVyfSBmcm9tIFwiLi9ldmVudExpc3RlbmVycy5qc1wiXG5idG5OZXdGb2xkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZU5ld0ZvbGRlcik7XG5cblxuXG4vLyBFdmVudExpc3RlbmVyIHRvIGhpZ2hsaWdodCBvbmUgZm9sZGVyLCBkZWxldGUgaXQgb3IgcmVuYW1lIGl0XG5sZXQgZm9sZGVyQWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9sZGVyLXVsXCIpO1xuaW1wb3J0IHtoaWdobGlnaHR9IGZyb20gXCIuL2V2ZW50TGlzdGVuZXJzLmpzXCI7XG5mb2xkZXJBY3Rpb25zLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoaWdobGlnaHQpO1xuXG5cbi8vZXZlbnRsaXN0ZW5lciBmb3IgcmlnaHQtY2xpY2sgaW5zaWRlIGZvbGRlci1saXN0LiBQb3BzIHVwIGEgY3VzdG9tIHJpZ2h0LWNsaWNrIG1lbnVcbmltcG9ydCB7cmlnaHRDbGlja01lbnUsIGRlbGV0ZUZvbGRlcn0gZnJvbSBcIi4vZXZlbnRMaXN0ZW5lcnMuanNcIjtcbmZvbGRlckFjdGlvbnMuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIHJpZ2h0Q2xpY2tNZW51KTtcbi8vIHJlbW92ZXMgdGhlIHJpZ2h0IGNsaWNrIG1lbnUgb3IgZGVsZXRlcyBhIGZvbGRlciBhbmQgdGhlIG9iamVjdCBmcm9tIGFycmF5XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3RbMF0gPT09IFwicmlnaHQtY2xpY2staXRlbVwiKSB7XG4gICAgICAgIGRlbGV0ZUZvbGRlcihldmVudCk7XG4gICAgfSBlbHNlIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lbnVcIikuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICB9XG59KTtcblxuLy8gb3BlbiBNb2RhbCB0byBjcmVhdGUgYSBuZXcgdGFza1xubGV0IGJ0bk9wZW5Nb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3Blbi1tb2RhbFwiKTtcbmltcG9ydCB7b3Blbk1vZGFsLCBjbG9zZU1vZGFsLCBzdWJtaXRUYXNrfSBmcm9tIFwiLi9ldmVudExpc3RlbmVyc01vZGFsLmpzXCI7XG5idG5PcGVuTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5Nb2RhbCk7XG5cbi8vIGNsb3NlIE1vZGFsXG5sZXQgYm50Q2xvc2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtY2xvc2VcIik7XG5ibnRDbG9zZU1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZU1vZGFsKTtcblxubGV0IG1vZGFsU3VibWl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrLXN1Ym1cIik7XG5tb2RhbFN1Ym1pdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc3VibWl0VGFzayk7XG5cbi8vIG9wZW4gYSAgdGFzayB0byBzZWUgaXQncyBkZXRhaWxzXG5pbXBvcnQge2dldFRhc2tOYW1lfSBmcm9tIFwiLi9ldmVudExpc3RlbmVycy5qc1wiO1xubGV0IHRhc2tEaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNib2R5XCIpO1xudGFza0Rpc3BsYXkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGdldFRhc2tOYW1lKTsiXSwic291cmNlUm9vdCI6IiJ9