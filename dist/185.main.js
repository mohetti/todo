(self.webpackChunktodo=self.webpackChunktodo||[]).push([[185,520],{185:(e,t,n)=>{"use strict";n.r(t),n.d(t,{newFolder:()=>d,styleHighlightedFolder:()=>a,delFromList:()=>s,rightClickHandler:()=>c,showModal:()=>h,closeModal:()=>u});var l=n(256),i=n(520);let d=function(e,t){let n=document.createElement("li"),i=l.folderArray[l.folderArray.length-1].folder;e.appendChild(n),n.innerText=i,n.classList.add("folders"),t.value=""},r=null,o=document.getElementById("menu"),a=function(e){document.querySelectorAll(".folders").forEach((e=>e.classList.remove("highlight"))),e.classList.add("highlight"),r=e},s=function(){r.remove(),o.classList.remove("active"),(0,i.render)()},c=function(e){o.style.top=e.clientY+10+"px",o.style.left=e.clientX+10+"px",o.classList.add("active")},h=function(){document.querySelector(".open-modal").style.visibility="visible"},u=function(){document.querySelector(".open-modal").style.visibility="hidden"}},520:(e,t,n)=>{"use strict";n.r(t),n.d(t,{displayTasks:()=>r,render:()=>d,openTask:()=>s,deleteNoteFromDisplay:()=>c,deleteTaskDom:()=>h,strikeThrough:()=>m,deleteAll:()=>u});var l=n(256);let i=document.querySelector("#body"),d=function(){for(;i.firstChild;)i.removeChild(i.firstChild)},r=function(){d();let e=l.folderArray[l.folderArray.findIndex((e=>!0===e.highlight))],t=e.tasks;for(let l=0;l<t.length;l++){let d=document.createElement("ul");d.classList.add("task-display"),i.appendChild(d);let o=document.createElement("img");d.appendChild(o),o.id="task-delete",o.src="https://image.flaticon.com/icons/png/512/61/61848.png";let a=document.createElement("li");d.appendChild(a),a.innerText=t[l].title;let s=document.createElement("li");d.appendChild(s),s.innerText=t[l].date,n=d,"low"===(r=e.tasks[l].prio)?n.style.backgroundColor="green":"med"===r?n.style.backgroundColor="yellow":"high"===r&&(n.style.backgroundColor="red")}var n,r},o=document.querySelector("#go-back"),a=document.querySelector("#del-task"),s=function(e){let t=l.folderArray[l.folderArray.findIndex((e=>!0===e.highlight))].tasks;var n;d(),n=e,o.style.visibility="visible",i.appendChild(o),a.style.visibility="visible",i.appendChild(a),a.dataset.parent=n,function(e){let t=document.createElement("h2");t.id="task-text",i.appendChild(t),t.innerText=e}(e);let r=t.findIndex((t=>t.title===e));if(function(e,t){let n=document.createElement("h4");n.id="date-text",i.appendChild(n),n.innerText=t[e].date}(r,t),function(e,t){let n=document.createElement("div");n.id="descr-text",i.appendChild(n),n.innerText=t[e].descr}(r,t),""!==t[r].notes[0])for(let e=0;e<t[r].notes.length;e++){let n=document.createElement("div");n.classList.add("note-container"),i.appendChild(n);let l=document.createElement("img");n.appendChild(l),l.id="note-delete",l.src="https://image.flaticon.com/icons/png/512/61/61848.png";let d=document.createElement("div");n.appendChild(d),d.innerText=t[r].notes[e],!0===t[r].strike[e]&&(d.id="strike-through")}},c=function(e){e.target.parentNode.remove()},h=function(e){e.target.parentNode.remove()},u=function(e){let t,n=document.getElementsByTagName("li");for(let l=0;l<n.length;l++)n[l].innerText===e&&(t=n[l]);t.parentElement.remove()},m=function(e){"strike-through"===e.target.id?(e.target.removeAttribute("id"),n.e(152).then(n.bind(n,152)).then((t=>{t.strikeFalse(e)}))):(e.target.id="strike-through",n.e(152).then(n.bind(n,152)).then((t=>{t.strikeTrue(e)})))}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLy4vc3JjL2RvbUZvbGRlci5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3Rhc2tzRE9NLmpzIl0sIm5hbWVzIjpbIm5ld0ZvbGRlciIsImZvbGRlckRpc3BsYXkiLCJmb2xkZXJOYW1lIiwibGkiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJmb2xkZXJUZXh0IiwiZm9sZGVyQXJyYXkiLCJmb2xkZXIiLCJhcHBlbmRDaGlsZCIsImlubmVyVGV4dCIsImNsYXNzTGlzdCIsImFkZCIsInZhbHVlIiwic3RvcmVJbmRleCIsIm1lbnUiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlSGlnaGxpZ2h0ZWRGb2xkZXIiLCJ0YXJnZXQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsIml0ZW0iLCJyZW1vdmUiLCJkZWxGcm9tTGlzdCIsInJlbmRlciIsInJpZ2h0Q2xpY2tIYW5kbGVyIiwiZXZlbnQiLCJzdHlsZSIsInRvcCIsImNsaWVudFkiLCJsZWZ0IiwiY2xpZW50WCIsInNob3dNb2RhbCIsInF1ZXJ5U2VsZWN0b3IiLCJ2aXNpYmlsaXR5IiwiY2xvc2VNb2RhbCIsImJvZHlEaXNwbGF5IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiZGlzcGxheVRhc2tzIiwiaGlnaGxpZ2h0ZWRGb2xkZXIiLCJ4IiwiaGlnaGxpZ2h0IiwiaGlnaGxpZ2h0ZWRUYXNrcyIsInRhc2tzIiwiaSIsImxlbmd0aCIsImxpc3RDb250YWluZXIiLCJ0YXNrRGVsZXRlIiwiaWQiLCJzcmMiLCJ0aXRsZURpc3BsYXkiLCJ0aXRsZSIsImRhdGVEaXNwbGF5IiwiZGF0ZSIsImNvbnRhaW5lciIsInByaW8iLCJiYWNrZ3JvdW5kQ29sb3IiLCJnb0JhY2siLCJvdmVyYWxsRGVsZXRlIiwib3BlblRhc2siLCJzZWFyY2hUZXJtIiwiaW5wdXQiLCJkYXRhc2V0IiwicGFyZW50IiwidGFza1RleHQiLCJkaXNwbGF5VGl0bGUiLCJvYmoiLCJmaW5kSW5kZXgiLCJkYXRlVGV4dCIsImRpc3BsYXlEYXRlIiwiZGVzY3JUZXh0IiwiZGVzY3IiLCJkaXNwbGF5RGVzY3IiLCJub3RlcyIsIm5vdGVDb250YWluZXIiLCJub3RlRGVsZXRlIiwibm90ZXNUZXh0Iiwic3RyaWtlIiwiZGVsZXRlTm90ZUZyb21EaXNwbGF5IiwicGFyZW50Tm9kZSIsImRlbGV0ZVRhc2tEb20iLCJkZWxldGVBbGwiLCJmb3VuZCIsImxpVGFncyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicGFyZW50RWxlbWVudCIsInN0cmlrZVRocm91Z2giLCJyZW1vdmVBdHRyaWJ1dGUiLCJ0aGVuIiwic3RyaWtlRmFsc2UiLCJzdHJpa2VUcnVlIl0sIm1hcHBpbmdzIjoiNFBBR0EsSUFBSUEsRUFBWSxTQUFrQkMsRUFBZUMsR0FDN0MsSUFBSUMsRUFBS0MsU0FBU0MsY0FBYyxNQUM1QkMsRUFBYSxFQUFBQyxZQUFZLEVBQUFBLFlBQUEsT0FBb0IsR0FBR0MsT0FFcERQLEVBQWNRLFlBQVlOLEdBQzFCQSxFQUFHTyxVQUFZSixFQUNmSCxFQUFHUSxVQUFVQyxJQUFJLFdBQ2pCVixFQUFXVyxNQUFRLElBRW5CQyxFQUFhLEtBQ2JDLEVBQU9YLFNBQVNZLGVBQWUsUUFDL0JDLEVBQXlCLFNBQWtDQyxHQUM1Q2QsU0FBU2UsaUJBQWlCLFlBQ2hDQyxTQUFRQyxHQUFRQSxFQUFLVixVQUFVVyxPQUFPLGVBQy9DSixFQUFPUCxVQUFVQyxJQUFJLGFBQ3JCRSxFQUFhSSxHQUdiSyxFQUFjLFdBQ2RULEVBQVdRLFNBQ1hQLEVBQUtKLFVBQVVXLE9BQU8sV0FDdEIsSUFBQUUsV0FHQUMsRUFBb0IsU0FBNEJDLEdBQzVDWCxFQUFLWSxNQUFNQyxJQUFNRixFQUFNRyxRQUFVLEdBQUssS0FDdENkLEVBQUtZLE1BQU1HLEtBQU9KLEVBQU1LLFFBQVUsR0FBSyxLQUN2Q2hCLEVBQUtKLFVBQVVDLElBQUksV0FHdkJvQixFQUFZLFdBQ0E1QixTQUFTNkIsY0FBYyxlQUM3Qk4sTUFBTU8sV0FBYSxXQUd6QkMsRUFBYSxX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LEVBQWNsRSxZQUFZbUUsR0FDMUJBLEVBQVczQixHQUFLLGNBQ2hCMkIsRUFBVzFCLElBQUksd0RBRWYsSUFBSTJCLEVBQVl6RSxTQUFTQyxjQUFjLE9BQ3ZDc0UsRUFBY2xFLFlBQVlvRSxHQUMxQkEsRUFBVW5FLFVBQVlpQyxFQUFpQndCLEdBQUtPLE1BQU03QixJQUNWLElBQXBDRixFQUFpQndCLEdBQUtXLE9BQU9qQyxLQUM3QmdDLEVBQVU1QixHQUFLLG9CQU0zQjhCLEVBQXdCLFNBQWdDckQsR0FDeERBLEVBQU1SLE9BQU84RCxXQUFXMUQsVUFHeEIyRCxFQUFnQixTQUF3QnZELEdBQ3hDQSxFQUFNUixPQUFPOEQsV0FBVzFELFVBR3hCNEQsRUFBWSxTQUFvQnJCLEdBQ2hDLElBQ0lzQixFQURBQyxFQUFTaEYsU0FBU2lGLHFCQUFxQixNQUUzQyxJQUFLLElBQUl4QyxFQUFJLEVBQUdBLEVBQUl1QyxFQUFPdEMsT0FBUUQsSUFDM0J1QyxFQUFPdkMsR0FBR25DLFlBQWNtRCxJQUN4QnNCLEVBQVFDLEVBQU92QyxJQUd2QnNDLEVBQU1HLGNBQWNoRSxVQUdwQmlFLEVBQWdCLFNBQXdCN0QsR0FDaEIsbUJBQXBCQSxFQUFNUixPQUFPK0IsSUFDYnZCLEVBQU1SLE9BQU9zRSxnQkFBZ0IsTUFDN0IsNkJBQXFCQyxNQUFLQyxJQUN0QkEsRUFBWUEsWUFBWWhFLFFBRzVCQSxFQUFNUixPQUFPK0IsR0FBSyxpQkFDbEIsNkJBQXFCd0MsTUFBS0UsSUFDdEJBLEVBQVdBLFdBQVdqRSIsImZpbGUiOiIxODUubWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Zm9sZGVyQXJyYXl9IGZyb20gXCIuL2ZvbGRlckxvZ2ljLmpzXCI7XG5pbXBvcnQge3JlbmRlcn0gZnJvbSBcIi4vdGFza3NET00uanNcIjtcblxubGV0IG5ld0ZvbGRlciA9IChmdW5jdGlvbiBuZXdMaXN0KGZvbGRlckRpc3BsYXksIGZvbGRlck5hbWUpIHtcbiAgICBsZXQgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgbGV0IGZvbGRlclRleHQgPSBmb2xkZXJBcnJheVtmb2xkZXJBcnJheS5sZW5ndGggLTFdLmZvbGRlcjtcbiAgICBcbiAgICBmb2xkZXJEaXNwbGF5LmFwcGVuZENoaWxkKGxpKTtcbiAgICBsaS5pbm5lclRleHQgPSBmb2xkZXJUZXh0O1xuICAgIGxpLmNsYXNzTGlzdC5hZGQoXCJmb2xkZXJzXCIpO1xuICAgIGZvbGRlck5hbWUudmFsdWUgPSBcIlwiO1xufSk7XG5sZXQgc3RvcmVJbmRleCA9IG51bGw7XG5sZXQgbWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVudVwiKTtcbmxldCBzdHlsZUhpZ2hsaWdodGVkRm9sZGVyID0gKGZ1bmN0aW9uIHN0eWxlSGlnaGxpZ2h0ZWRGb2xkZXIgKHRhcmdldCkge1xuICAgIGxldCBhbGxJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9sZGVyc1wiKTtcbiAgICBhbGxJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gaXRlbS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlnaGxpZ2h0XCIpKTtcbiAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZChcImhpZ2hsaWdodFwiKTtcbiAgICBzdG9yZUluZGV4ID0gdGFyZ2V0O1xufSk7XG4vLyBzdG9yZUluZGV4IGluIGFib3ZlIGFuZCBiZWxvdyBuZWVkcyB0byBiZSBjaGFuZ2VkXG5sZXQgZGVsRnJvbUxpc3QgPSAoZnVuY3Rpb24gZGVsRnJvbUxpc3QoKSB7XG4gICAgc3RvcmVJbmRleC5yZW1vdmUoKTtcbiAgICBtZW51LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgcmVuZGVyKCk7XG59KTtcblxubGV0IHJpZ2h0Q2xpY2tIYW5kbGVyID0gKGZ1bmN0aW9uIHJpZ2h0Q2xpY2tIYW5kbGVyKGV2ZW50KSB7XG4gICAgICAgIG1lbnUuc3R5bGUudG9wID0gZXZlbnQuY2xpZW50WSArIDEwICsgXCJweFwiO1xuICAgICAgICBtZW51LnN0eWxlLmxlZnQgPSBldmVudC5jbGllbnRYICsgMTAgKyBcInB4XCI7XG4gICAgICAgIG1lbnUuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbn0pO1xuXG5sZXQgc2hvd01vZGFsID0gKGZ1bmN0aW9uIHNob3dNb2RhbCgpIHtcbiAgICBsZXQgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm9wZW4tbW9kYWxcIik7XG4gICAgbW9kYWwuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xufSk7XG5cbmxldCBjbG9zZU1vZGFsID0gKGZ1bmN0aW9uIGNsb3NlTW9kYWwoKSB7XG4gICAgbGV0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vcGVuLW1vZGFsXCIpO1xuICAgIG1vZGFsLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xufSk7XG5cblxuZXhwb3J0IHtuZXdGb2xkZXIsIHN0eWxlSGlnaGxpZ2h0ZWRGb2xkZXIsIGRlbEZyb21MaXN0LCByaWdodENsaWNrSGFuZGxlciwgc2hvd01vZGFsLCBjbG9zZU1vZGFsfSIsImltcG9ydCB7Zm9sZGVyQXJyYXl9IGZyb20gXCIuL2ZvbGRlckxvZ2ljLmpzXCI7XG5pbXBvcnQgeyBzZXRMb2NhbFN0b3JhZ2UgfSBmcm9tIFwiLi9sb2NhbFN0b3JhZ2UuanNcIjtcbmxldCBib2R5RGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYm9keVwiKTtcblxubGV0IHJlbmRlciA9IChmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgd2hpbGUgKGJvZHlEaXNwbGF5LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgYm9keURpc3BsYXkucmVtb3ZlQ2hpbGQoYm9keURpc3BsYXkuZmlyc3RDaGlsZCk7XG4gICAgfVxufSk7XG5cbmxldCBoaWdobGlnaHRpbmdGb2xkZXIgPSAoZnVuY3Rpb24gaGlnaGxpZ2h0aW5nRm9sZGVyKGNvbnRhaW5lciwgcHJpbykge1xuICAgIGlmIChwcmlvID09PSBcImxvd1wiKSB7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcImdyZWVuXCI7XG4gICAgfSBlbHNlIGlmIChwcmlvID09PSBcIm1lZFwiKSB7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInllbGxvd1wiO1xuICAgIH0gZWxzZSBpZiAocHJpbyA9PT0gXCJoaWdoXCIpIHtcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XG4gICAgfVxufSlcblxubGV0IGRpc3BsYXlUYXNrcyA9IChmdW5jdGlvbiBkaXNwbGF5VGFza3MoKSB7XG4gICAgcmVuZGVyKCk7XG4gICAgbGV0IGhpZ2hsaWdodGVkRm9sZGVyID0gZm9sZGVyQXJyYXlbZm9sZGVyQXJyYXkuZmluZEluZGV4KHggPT4geC5oaWdobGlnaHQgPT09IHRydWUpXTtcbiAgICBsZXQgaGlnaGxpZ2h0ZWRUYXNrcyA9IGhpZ2hsaWdodGVkRm9sZGVyLnRhc2tzO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGlnaGxpZ2h0ZWRUYXNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgbGlzdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKTtcbiAgICAgICAgbGlzdENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidGFzay1kaXNwbGF5XCIpO1xuICAgICAgICBib2R5RGlzcGxheS5hcHBlbmRDaGlsZChsaXN0Q29udGFpbmVyKTtcblxuICAgICAgICBsZXQgdGFza0RlbGV0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgICAgIGxpc3RDb250YWluZXIuYXBwZW5kQ2hpbGQodGFza0RlbGV0ZSk7XG4gICAgICAgIHRhc2tEZWxldGUuaWQgPSBcInRhc2stZGVsZXRlXCI7XG4gICAgICAgIHRhc2tEZWxldGUuc3JjPVwiaHR0cHM6Ly9pbWFnZS5mbGF0aWNvbi5jb20vaWNvbnMvcG5nLzUxMi82MS82MTg0OC5wbmdcIjtcbiAgICAgICAgXG4gICAgICAgIGxldCB0aXRsZURpc3BsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgICAgIGxpc3RDb250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGVEaXNwbGF5KTtcbiAgICAgICAgdGl0bGVEaXNwbGF5LmlubmVyVGV4dCA9IGhpZ2hsaWdodGVkVGFza3NbaV0udGl0bGU7XG5cbiAgICAgICAgbGV0IGRhdGVEaXNwbGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuICAgICAgICBsaXN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGRhdGVEaXNwbGF5KTtcbiAgICAgICAgZGF0ZURpc3BsYXkuaW5uZXJUZXh0ID0gaGlnaGxpZ2h0ZWRUYXNrc1tpXS5kYXRlO1xuICAgICAgICBcbiAgICAgICAgaGlnaGxpZ2h0aW5nRm9sZGVyKGxpc3RDb250YWluZXIsIGhpZ2hsaWdodGVkRm9sZGVyLnRhc2tzW2ldLnByaW8pO1xuICAgIH07XG5cbn0pO1xuXG5sZXQgZ29CYWNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNnby1iYWNrXCIpO1xubGV0IG92ZXJhbGxEZWxldGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbC10YXNrXCIpO1xubGV0IGRpc3BsYXlEZWxBbmRCYWNrSWNvbiA9IChmdW5jdGlvbiBkaXNwbGF5RGVsQW5kQmFja0ljb24oaW5wdXQpIHtcbiAgICBnb0JhY2suc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuICAgIGJvZHlEaXNwbGF5LmFwcGVuZENoaWxkKGdvQmFjayk7XG5cbiAgICBvdmVyYWxsRGVsZXRlLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcbiAgICBib2R5RGlzcGxheS5hcHBlbmRDaGlsZChvdmVyYWxsRGVsZXRlKTtcbiAgICBvdmVyYWxsRGVsZXRlLmRhdGFzZXQucGFyZW50ID0gaW5wdXQ7XG59KTtcblxubGV0IGRpc3BsYXlUaXRsZSA9IChmdW5jdGlvbiBkaXNwbGF5VGl0bGUoaW5wdXQpIHtcbiAgICBsZXQgdGFza1RleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDJcIik7XG4gICAgdGFza1RleHQuaWQgPSBcInRhc2stdGV4dFwiO1xuICAgIGJvZHlEaXNwbGF5LmFwcGVuZENoaWxkKHRhc2tUZXh0KTtcbiAgICB0YXNrVGV4dC5pbm5lclRleHQgPSBpbnB1dDtcbn0pO1xuXG5sZXQgZGlzcGxheURhdGUgPSAoZnVuY3Rpb24gZGlzcGxheURhdGUoaW5wdXQsIGhpZ2hsaWdodCkge1xuICAgIGxldCBkYXRlVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoNFwiKTtcbiAgICBkYXRlVGV4dC5pZCA9IFwiZGF0ZS10ZXh0XCI7XG4gICAgYm9keURpc3BsYXkuYXBwZW5kQ2hpbGQoZGF0ZVRleHQpO1xuICAgIGRhdGVUZXh0LmlubmVyVGV4dCA9IGhpZ2hsaWdodFtpbnB1dF0uZGF0ZTtcbn0pO1xuXG5sZXQgZGlzcGxheURlc2NyID0gKGZ1bmN0aW9uIGRpc3BsYXlEZXNjcihpbnB1dCwgaGlnaGxpZ2h0KSB7XG4gICAgbGV0IGRlc2NyVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZGVzY3JUZXh0LmlkID0gXCJkZXNjci10ZXh0XCI7XG4gICAgYm9keURpc3BsYXkuYXBwZW5kQ2hpbGQoZGVzY3JUZXh0KTtcbiAgICBkZXNjclRleHQuaW5uZXJUZXh0ID0gaGlnaGxpZ2h0W2lucHV0XS5kZXNjcjtcbn0pO1xuXG5sZXQgb3BlblRhc2sgPSAoZnVuY3Rpb24gb3BlblRhc2soc2VhcmNoVGVybSkge1xuICAgIGxldCBoaWdobGlnaHRlZEZvbGRlciA9IGZvbGRlckFycmF5W2ZvbGRlckFycmF5LmZpbmRJbmRleCh4ID0+IHguaGlnaGxpZ2h0ID09PSB0cnVlKV07XG4gICAgbGV0IGhpZ2hsaWdodGVkVGFza3MgPSBoaWdobGlnaHRlZEZvbGRlci50YXNrcztcblxuICAgIHJlbmRlcigpO1xuICAgIGRpc3BsYXlEZWxBbmRCYWNrSWNvbihzZWFyY2hUZXJtKTtcbiAgICBkaXNwbGF5VGl0bGUoc2VhcmNoVGVybSk7XG4gICAgbGV0IG9iaiA9IGhpZ2hsaWdodGVkVGFza3MuZmluZEluZGV4KHggPT4geC50aXRsZSA9PT0gc2VhcmNoVGVybSk7XG4gICAgZGlzcGxheURhdGUob2JqLCBoaWdobGlnaHRlZFRhc2tzKTtcbiAgICBkaXNwbGF5RGVzY3Iob2JqLCBoaWdobGlnaHRlZFRhc2tzKTtcblxuLy8gZGlzcGxheSBub3Rlc1xuICAgIGlmIChoaWdobGlnaHRlZFRhc2tzW29ial0ubm90ZXNbMF0gIT09IFwiXCIpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoaWdobGlnaHRlZFRhc2tzW29ial0ubm90ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBub3RlQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIG5vdGVDb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm5vdGUtY29udGFpbmVyXCIpO1xuICAgICAgICAgICAgYm9keURpc3BsYXkuYXBwZW5kQ2hpbGQobm90ZUNvbnRhaW5lcik7XG5cbiAgICAgICAgICAgIGxldCBub3RlRGVsZXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICAgICAgICAgIG5vdGVDb250YWluZXIuYXBwZW5kQ2hpbGQobm90ZURlbGV0ZSk7XG4gICAgICAgICAgICBub3RlRGVsZXRlLmlkID0gXCJub3RlLWRlbGV0ZVwiO1xuICAgICAgICAgICAgbm90ZURlbGV0ZS5zcmM9XCJodHRwczovL2ltYWdlLmZsYXRpY29uLmNvbS9pY29ucy9wbmcvNTEyLzYxLzYxODQ4LnBuZ1wiO1xuIFxuICAgICAgICAgICAgbGV0IG5vdGVzVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBub3RlQ29udGFpbmVyLmFwcGVuZENoaWxkKG5vdGVzVGV4dCk7XG4gICAgICAgICAgICBub3Rlc1RleHQuaW5uZXJUZXh0ID0gaGlnaGxpZ2h0ZWRUYXNrc1tvYmpdLm5vdGVzW2ldO1xuICAgICAgICAgICAgaWYgKGhpZ2hsaWdodGVkVGFza3Nbb2JqXS5zdHJpa2VbaV0gPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBub3Rlc1RleHQuaWQgPSBcInN0cmlrZS10aHJvdWdoXCI7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH07XG59KTtcblxubGV0IGRlbGV0ZU5vdGVGcm9tRGlzcGxheSA9IChmdW5jdGlvbiBkZWxldGVOb3RlRnJvbURpc3BsYXkoZXZlbnQpIHtcbiAgICBldmVudC50YXJnZXQucGFyZW50Tm9kZS5yZW1vdmUoKTtcbn0pXG5cbmxldCBkZWxldGVUYXNrRG9tID0gKGZ1bmN0aW9uIGRlbGV0ZVRhc2tEb20oZXZlbnQpIHtcbiAgICBldmVudC50YXJnZXQucGFyZW50Tm9kZS5yZW1vdmUoKTtcbn0pO1xuXG5sZXQgZGVsZXRlQWxsID0gKGZ1bmN0aW9uIGRlbGV0ZUFsbChzZWFyY2hUZXJtKSB7XG4gICAgbGV0IGxpVGFncyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwibGlcIik7XG4gICAgbGV0IGZvdW5kO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlUYWdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChsaVRhZ3NbaV0uaW5uZXJUZXh0ID09PSBzZWFyY2hUZXJtKSB7XG4gICAgICAgICAgICBmb3VuZCA9IGxpVGFnc1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3VuZC5wYXJlbnRFbGVtZW50LnJlbW92ZSgpO1xufSlcblxubGV0IHN0cmlrZVRocm91Z2ggPSAoZnVuY3Rpb24gc3RyaWtlVGhyb3VnaChldmVudCkge1xuICAgIGlmIChldmVudC50YXJnZXQuaWQgPT09IFwic3RyaWtlLXRocm91Z2hcIikge1xuICAgICAgICBldmVudC50YXJnZXQucmVtb3ZlQXR0cmlidXRlKFwiaWRcIik7XG4gICAgICAgIGltcG9ydChcIi4vdGFza3MuanNcIikudGhlbihzdHJpa2VGYWxzZSA9PiB7XG4gICAgICAgICAgICBzdHJpa2VGYWxzZS5zdHJpa2VGYWxzZShldmVudCkgIFxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBldmVudC50YXJnZXQuaWQgPSBcInN0cmlrZS10aHJvdWdoXCI7XG4gICAgICAgIGltcG9ydChcIi4vdGFza3MuanNcIikudGhlbihzdHJpa2VUcnVlID0+IHtcbiAgICAgICAgICAgIHN0cmlrZVRydWUuc3RyaWtlVHJ1ZShldmVudCkgIFxuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuXG5cbmV4cG9ydCB7ZGlzcGxheVRhc2tzLCByZW5kZXIsIG9wZW5UYXNrLCBkZWxldGVOb3RlRnJvbURpc3BsYXksIGRlbGV0ZVRhc2tEb20sIHN0cmlrZVRocm91Z2gsIGRlbGV0ZUFsbH07Il0sInNvdXJjZVJvb3QiOiIifQ==